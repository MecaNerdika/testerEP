<!DOCTYPE html>
<html lang="id">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Kuis trias politica</title>
    <style>
      :root {
        --bg: #060000; /* slate-900 */
        --card: #111827; /* gray-900 */
        --muted: #334155; /* slate-600 */
        --text: #ffffff; /* gray-200 */
        --accent: #38bdf8; /* sky-400 */
        --accent-2: #22c55e; /* green-500 */
        --danger: #ef4444; /* red-500 */
        --warn: #f59e0b; /* amber-500 */
        --shadow: 0 8px 24px rgba(0, 0, 0, 0.35);
        --radius: 16px;
      }
      * {
        box-sizing: border-box;
      }
      body {
        margin: 0;
        font-family: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto,
          "Helvetica Neue", Arial;
        background: radial-gradient(
            1200px 800px at 10% -10%,
            #1e293b,
            transparent
          ),
          radial-gradient(800px 600px at 120% 0%, #0b3b47, transparent),
          var(--bg);
        color: var(--text);
        min-height: 100svh;
        display: flex;
        align-items: center;
        justify-content: center;
        padding: 24px;
      }
      .app {
        width: 100%;
        max-width: 980px;
      }
      header {
        display: flex;
        align-items: center;
        justify-content: space-between;
        gap: 12px;
        margin-bottom: 16px;
      }
      .brand {
        font-weight: 800;
        letter-spacing: 0.5px;
        font-size: clamp(18px, 3.5vw, 24px);
      }
      .timer {
        font-variant-numeric: tabular-nums;
        font-weight: 700;
        padding: 10px 14px;
        border-radius: 999px;
        background: #0b1220;
        border: 1px solid #1f2a44;
        box-shadow: var(--shadow);
      }
      .card {
        background: linear-gradient(180deg, #0b1220, #0a1020);
        border: 1px solid #1f2a44;
        border-radius: var(--radius);
        box-shadow: var(--shadow);
      }
      .section {
        display: none;
      }
      .active {
        display: block;
      }
      .card-inner {
        padding: 20px;
      }
      .grid {
        display: grid;
        gap: 16px;
      }
      .grid-2 {
        grid-template-columns: 1fr 1fr;
      }
      .grid-responsive {
        grid-template-columns: 1fr;
      }
      @media (min-width: 720px) {
        .grid-responsive {
          grid-template-columns: 1fr 320px;
        }
      }

      input[type="text"],
      input[type="password"] {
        width: 100%;
        padding: 12px 14px;
        border-radius: 12px;
        border: 1px solid #26314d;
        background: #0b1220;
        color: var(--text);
        outline: none;
        box-shadow: inset 0 0 0 9999px rgba(255, 255, 255, 0);
      }
      label {
        font-size: 14px;
        color: #cbd5e1;
      }
      .btn {
        cursor: pointer;
        padding: 12px 16px;
        border-radius: 14px;
        background: var(--accent);
        color: #001219;
        border: none;
        font-weight: 700;
        box-shadow: var(--shadow);
        transition: 0.2s transform ease;
      }
      .btn:active {
        transform: translateY(1px);
      }
      .btn.secondary {
        background: #1f2937;
        color: #e2e8f0;
        border: 1px solid #334155;
      }
      .btn.warn {
        background: var(--warn);
        color: #0b1220;
      }
      .btn.danger {
        background: var(--danger);
        color: #0b1220;
      }
      .muted {
        color: #94a3b8;
      }
      .pill {
        display: inline-flex;
        align-items: center;
        gap: 8px;
        padding: 6px 10px;
        border-radius: 999px;
        background: #0b1220;
        border: 1px solid #223156;
        font-size: 12px;
        color: #cbd5e1;
      }

      .question-area {
        display: flex;
        flex-direction: column;
        gap: 14px;
      }
      .q-title {
        font-weight: 800;
        font-size: 18px;
      }
      .choices {
        display: grid;
        gap: 10px;
      }
      .choice {
        display: flex;
        gap: 10px;
        align-items: flex-start;
        border: 1px solid #1f2a44;
        background: #0b1220;
        padding: 12px;
        border-radius: 12px;
        cursor: pointer;
      }
      .choice input {
        margin-top: 4px;
      }

      .nav {
        display: flex;
        gap: 10px;
        flex-wrap: wrap;
        max-height: 240px;
        overflow: auto;
        padding: 10px;
      }
      .nav button {
        width: 44px;
        height: 40px;
        border-radius: 10px;
        border: 1px solid #1f2a44;
        background: #0b1220;
        color: #cbd5e1;
        font-weight: 700;
        cursor: pointer;
      }
      .nav button.active {
        outline: 2px solid var(--accent);
        color: #0ea5e9;
      }
      .nav button.done {
        background: #07291f;
        border-color: #0b7a53;
        color: #34d399;
      }

      .footer-actions {
        display: flex;
        align-items: center;
        justify-content: space-between;
        gap: 10px;
        margin-top: 10px;
      }

      .legend {
        display: flex;
        gap: 8px;
        flex-wrap: wrap;
      }

      .results {
        display: grid;
        gap: 12px;
      }
      .score-box {
        display: grid;
        grid-template-columns: 1fr 1fr;
        gap: 10px;
      }
      .score-card {
        background: #0b1220;
        border: 1px solid #1f2a44;
        border-radius: 14px;
        padding: 14px;
      }

      .info-row {
        display: flex;
        gap: 10px;
        flex-wrap: wrap;
        align-items: center;
        justify-content: space-between;
      }
    </style>
    <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
  </head>
  <body>
    <div class="app">
      <header>
        <div class="brand">kuis trias politica</div>
        <div class="pill" id="infoUser">Belum login</div>
        <div class="timer" id="timer">20:00</div>
      </header>

      <!-- SECTION 1: FORM MINIMAL -->
      <section id="section-form" class="section active">
        <div class="card">
          <div class="card-inner grid">
            <div>
              <h2 style="margin: 0 0 10px 0">Masuk Kuis</h2>
              <p class="muted" style="margin-top: 0">
                Masukkan nama dan password untuk memulai. Tidak ada pengaturan
                tambahan.
              </p>
              <div class="grid">
                <div>
                  <label for="nama">Nama</label>
                  <input id="nama" type="text" placeholder="Nama peserta" />
                </div>
                <div>
                  <label for="pass">Password</label>
                  <input id="pass" type="password" placeholder="Password" />
                </div>
                <button class="btn" id="btnMulai">Mulai Kuis</button>
              </div>
            </div>
          </div>
        </div>
      </section>

      <!-- SECTION 2: QUIZ -->
      <section id="section-quiz" class="section">
        <div class="grid grid-responsive">
          <div class="card">
            <div class="card-inner">
              <div class="info-row">
                <div class="pill" id="infoKategori">Kategori: -</div>
                <div class="pill" id="infoSoal">Soal 0 / 180</div>
              </div>
              <div class="question-area" id="questionArea">
                <!-- Question inject here -->
              </div>
              <div class="footer-actions">
                <button class="btn secondary" id="prevBtn">Prev</button>
                <div class="legend">
                  <span class="pill">• Biru = aktif</span>
                  <span
                    class="pill"
                    style="
                      background: #07291f;
                      color: #34d399;
                      border-color: #0b7a53;
                    "
                    >• Hijau = terjawab</span
                  >
                </div>
                <button class="btn" id="nextBtn">Next</button>
              </div>
            </div>
          </div>
          <div class="card">
            <div class="card-inner">
              <h3 style="margin-top: 0">Navigasi Soal</h3>
              <div class="nav" id="nav">
                <!-- Nav buttons injected here -->
              </div>
              <div class="grid" style="margin-top: 8px">
                <button class="btn warn" id="btnSubmit">
                  Kumpulkan Jawaban
                </button>
                <button class="btn danger" id="btnReset">Reset Jawaban</button>
              </div>
            </div>
          </div>
        </div>
      </section>

      <!-- SECTION 3: HASIL -->
      <section id="section-result" class="section">
        <div class="card">
          <div class="card-inner results">
            <h2 style="margin: 0">Hasil Ujian</h2>
            <p class="muted" id="resultUser">Peserta: -</p>
            <div class="score-box">
              <div class="score-card" style="grid-column: span 2">
                <div class="muted">Total Skor</div>
                <div id="scoreTotal" style="font-size: 30px; font-weight: 900">
                  0 / 180
                </div>
              </div>
            </div>
            <div>
              <button class="btn" id="btnUlang">Mulai Lagi</button>
            </div>
          </div>
        </div>
      </section>
    </div>

    <script>
      /** UTIL **/
      const el = (sel) => document.querySelector(sel);
      const els = (sel) => Array.from(document.querySelectorAll(sel));
      const shuffle = (arr) =>
        arr
          .map((v) => [Math.random(), v])
          .sort((a, b) => a[0] - b[0])
          .map((x) => x[1]);

      /** BANK SOAL (40/40/40) **/
      // Format: {type:'sinonim'|'antonim'|'hiponim', q:'', options:['','','',''], answer: index}

      const SOAL_fungsi = [
        {
          q: "Dalam proses pembentukan Undang-Undang, Dewan Perwakilan Rakyat (DPR) dan Presiden memiliki hak inisiatif. Jika sebuah Rancangan Undang-Undang (RUU) telah disepakati bersama namun Presiden tidak menandatanganinya dalam waktu 30 hari, konsekuensi konstitusional yang tepat adalah...",
          o: [
            "RUU tersebut gagal menjadi Undang-Undang dan harus diajukan kembali pada periode berikutnya.",
            "RUU tersebut sah menjadi Undang-Undang dan wajib diundangkan.",
            "Presiden wajib mengajukan permintaan kepada Mahkamah Konstitusi untuk memutuskan status RUU tersebut.",
            "Majelis Permusyawaratan Rakyat (MPR) dapat memanggil Presiden untuk memberikan penjelasan.",
            "Dewan Perwakilan Daerah (DPD) dapat mengajukan keberatan secara konstitusional.",
          ],
          a: 1,
        },
        {
          q: "Mahkamah Konstitusi memiliki kewenangan untuk mengadili pada tingkat pertama dan terakhir yang putusannya bersifat final untuk menguji undang-undang terhadap Undang-Undang Dasar 1945. Dasar hukum kewenangan ini menunjukkan prinsip...",
          o: [
            "Supremasi parlemen untuk menciptakan peraturan perundang-undangan.",
            "Keseimbangan antara kekuasaan legislatif dan yudikatif.",
            "Jaminan konstitusionalitas terhadap setiap produk hukum yang dibuat oleh lembaga legislatif.",
            "Penguatan peran eksekutif dalam mengontrol proses legislasi.",
            "Perlindungan hak asasi manusia dari intervensi lembaga negara.",
          ],
          a: 2,
        },
        {
          q: "Badan Pemeriksa Keuangan (BPK) menyampaikan hasil pemeriksaan atas pertanggungjawaban keuangan negara kepada Dewan Perwakilan Rakyat (DPR) dalam bentuk laporan hasil pemeriksaan (LHP). Jika dalam LHP tersebut ditemukan indikasi kerugian negara yang signifikan, tindak lanjut yang dapat dilakukan DPR yang paling sesuai dengan kewenangannya adalah...",
          o: [
            "Langsung membentuk tim penyelidik independen untuk menindaklanjuti temuan BPK.",
            "Menerbitkan surat perintah penghentian pembayaran anggaran kepada kementerian terkait.",
            "Menggunakan hasil pemeriksaan sebagai bahan pertimbangan dalam rapat paripurna tentang persetujuan pertanggungjawaban keuangan.",
            "Menunjuk jaksa agung untuk melakukan penyelidikan lebih lanjut atas kasus tersebut.",
            "Meminta Mahkamah Agung untuk melakukan judicial review terhadap kebijakan yang menyebabkan kerugian negara.",
          ],
          a: 2,
        },
        {
          q: "Dewan Perwakilan Daerah (DPD) dapat ikut membahas Rancangan Undang-Undang (RUU) yang berkaitan dengan otonomi daerah, hubungan pusat dan daerah, pembentukan dan pemekaran daerah, serta pengelolaan sumber daya alam dan sumber daya ekonomi lainnya. Namun, DPD **tidak** memiliki kewenangan untuk...",
          o: [
            "Memberikan pertimbangan kepada DPR atas RUU tersebut.",
            "Mengajukan usul perubahan terhadap pasal-pasal tertentu dalam RUU tersebut.",
            "Melakukan pengawasan terhadap pelaksanaan undang-undang tersebut.",
            "Ikut menyetujui bersama RUU tersebut bersama DPR dan Presiden.",
            "Mengajukan RUU tersebut kepada DPR.",
          ],
          a: 3,
        },
        {
          q: "Majelis Permusyawaratan Rakyat (MPR) hanya dapat bersidang untuk melantik Presiden dan Wakil Presiden serta memberhentikan Presiden dan/atau Wakil Presiden dalam masa jabatannya. Prosedur pemberhentian Presiden oleh MPR harus didahului dengan...",
          o: [
            "Putusan Mahkamah Agung bahwa Presiden terbukti melakukan kejahatan.",
            "Rekomendasi dari Dewan Perwakilan Daerah (DPD).",
            "Usul dari sekurang-kurangnya 2/3 anggota MPR.",
            "Permintaan dari Mahkamah Konstitusi bahwa Presiden terbukti melanggar hukum.",
            "Persetujuan dari Dewan Perwakilan Rakyat (DPR) berdasarkan putusan Mahkamah Konstitusi.",
          ],
          a: 4,
        },
        {
          q: "Sebuah Undang-Undang yang telah disahkan DPR dan Presiden dinilai oleh sekelompok masyarakat bertentangan dengan nilai-nilai Pancasila. Lembaga yang tepat untuk mengajukan pengujian Undang-Undang tersebut dan landasan hukum utama yang digunakan adalah...",
          o: [
            "Mahkamah Agung, dengan landasan Pasal 24A UUD 1945.",
            "Mahkamah Konstitusi, dengan landasan Pasal 24C ayat (1) UUD 1945.",
            "Mahkamah Konstitusi, dengan landasan Pembukaan UUD 1945.",
            "Komisi Yudisial, dengan landasan Undang-Undang tentang Kekuasaan Kehakiman.",
            "Pengadilan Negeri, dengan landasan Kitab Undang-Undang Hukum Pidana.",
          ],
          a: 1,
        },
        {
          q: "Presiden mengeluarkan Peraturan Pemerintah Pengganti Undang-Undang (Perpu) dalam keadaan genting. DPR menolak Perpu tersebut dalam rapat paripurna. Implikasi konstitusional dari penolakan DPR adalah...",
          o: [
            "Perpu tersebut tetap berlaku sampai dengan DPR mengajukan RUU pengganti.",
            "Perpu tersebut batal dengan sendirinya dan tidak memiliki kekuatan hukum.",
            "Presiden dapat mengajukan Perpu tersebut kembali kepada DPR pada sidang berikutnya.",
            "Mahkamah Konstitusi dapat membatalkan keputusan DPR jika dianggap tidak konstitusional.",
            "Perpu tersebut berubah menjadi rancangan undang-undang untuk dibahas bersama.",
          ],
          a: 1,
        },
        {
          q: "Komisi Yudisial (KY) memiliki tugas mengusulkan pengangkatan Hakim Agung dan mempunyai wewenang lain dalam rangka menjaga dan menegakkan kehormatan, keluhuran martabat, serta perilaku hakim. Jika KY menerima laporan adanya dugaan pelanggaran berat yang dilakukan seorang hakim, prosedur selanjutnya yang sesuai dengan mekanisme checks and balances adalah...",
          o: [
            "KY langsung memberhentikan hakim tersebut karena buktinya sudah cukup.",
            "KY menyampaikan rekomendasi pemberhentian kepada Presiden untuk ditindaklanjuti.",
            "KY melakukan pemeriksaan, kemudian menyampaikan hasilnya kepada Mahkamah Agung untuk diambil tindakan lebih lanjut.",
            "KY membawa kasus tersebut ke Pengadilan Negeri untuk diproses secara hukum.",
            "KY mengajukan permohonan judicial review kepada Mahkamah Konstitusi atas perilaku hakim tersebut.",
          ],
          a: 2,
        },
        {
          q: "Hubungan kewenangan antar lembaga negara dirancang untuk menciptakan sistem checks and balances. Manakah kombinasi kewenangan berikut yang paling tepat mencerminkan sistem tersebut?",
          o: [
            "DPR mengesahkan APBN dan Presiden melaksanakannya tanpa ada kewenangan intervensi.",
            "Mahkamah Konstitusi membatalkan UU yang dibuat DPR dan Presiden.",
            "BPK mengaudit keuangan BPK sendiri untuk menjamin independensi.",
            "Presiden mengangkat dan memberhentikan anggota KPU tanpa pertimbangan DPR.",
            "DPD menyetujui anggaran belanja negara yang diajukan oleh Presiden.",
          ],
          a: 1,
        },
        {
          q: "Pengangkatan Hakim Agung melibatkan beberapa lembaga. Urutan prosedur yang benar sesuai konstitusi adalah...",
          o: [
            "KY mengusulkan -> DPR memilih -> Presiden menetapkan.",
            "Presiden mengusulkan -> KY memberikan pertimbangan -> DPR menyetujui.",
            "MA mengusulkan -> KY meneliti -> DPR menyetujui -> Presiden menetapkan.",
            "KY mengusulkan -> Presiden menyetujui -> DPR memberikan persetujuan.",
            "DPR mengusulkan -> KY memberikan pertimbangan -> Presiden menetapkan.",
          ],
          a: 0,
        },
        {
          q: "Dalam konteks negara hukum, kekuasaan kehakiman dilaksanakan oleh sebuah Mahkamah Agung dan badan peradilan yang berada di bawahnya dalam lingkungan peradilan umum, lingkungan peradilan agama, lingkungan peradilan militer, lingkungan peradilan tata usaha negara, dan oleh sebuah Mahkamah Konstitusi. Prinsip yang mendasari pembagian kewenangan antara Mahkamah Agung dan Mahkamah Konstitusi adalah...",
          o: [
            "MA sebagai penjegas hukum positif, MK sebagai penjaga semangat konstitusi.",
            "MA mengadili kasus pidana, MK mengadili kasus perdata.",
            "MA berwenang mengadili rakyat, MK berwenang mengadili pejabat negara.",
            "Kewenangan MA ditentukan oleh Presiden, sedangkan kewenangan MK ditentukan oleh DPR.",
            "MA berfungsi sebagai pengadilan banding, MK berfungsi sebagai pengadilan pertama.",
          ],
          a: 0,
        },
        {
          q: "Badan Pemeriksa Keuangan (BPK) melakukan pemeriksaan terhadap pengelolaan keuangan daerah. Hasil pemeriksaan menunjukkan adanya penyimpangan prosedur dalam pengadaan barang dan jasa. Lembaga yang wajib menindaklanjuti temuan BPK tersebut adalah...",
          o: [
            "Mahkamah Agung.",
            "Komisi Pemberantasan Korupsi.",
            "Pemerintah daerah dan DPRD setempat.",
            "Kementerian Dalam Negeri.",
            "Kejaksaan Agung.",
          ],
          a: 2,
        },
        {
          q: "Sebuah partai politik mengajukan uji materi (judicial review) terhadap Undang-Undang Pemilu kepada Mahkamah Konstitusi. Mahkamah Konstitusi menolak permohonan tersebut dengan alasan bahwa pemohon tidak memiliki legal standing (kedudukan hukum). Alasan penolakan tersebut paling mungkin karena...",
          o: [
            "Partai politik tidak termasuk dalam subjek hukum yang dapat mengajukan uji materi.",
            "Undang-Undang Pemilu tidak bertentangan dengan UUD 1945.",
            "Permohonan tidak didukung oleh bukti yang cukup kuat.",
            "Partai politik tidak dapat menunjukkan bagaimana hak konstitusionalnya dilanggar oleh UU tersebut.",
            "Mahkamah Konstitusi sedang memproses permohonan serupa dari partai lain.",
          ],
          a: 3,
        },
        {
          q: "Presiden mengajukan Rancangan Anggaran Pendapatan dan Belanja Negara (RAPBN) kepada DPR. DPR melakukan pembahasan dan mengubah beberapa postur anggaran yang diajukan. Proses ini mencerminkan adanya hubungan...",
          o: [
            "Koordinasi antar lembaga eksekutif untuk menyelaraskan kebijakan fiskal.",
            "Keseimbangan kekuasaan antara eksekutif yang merencanakan dan legislatif yang menyetujui.",
            "Supervisi dari DPR terhadap kinerja Presiden dalam melaksanakan anggaran tahun sebelumnya.",
            "Delegasi wewenang dari Presiden kepada DPR untuk mengelola keuangan negara.",
            "Integrasi fungsi legislasi dan fungsi anggaran dalam satu lembaga.",
          ],
          a: 1,
        },
        {
          q: "Komisi Nasional Hak Asasi Manusia (Komnas HAM) melakukan penyelidikan atas dugaan pelanggaran HAM yang berat. Jika dari penyelidikan tersebut ditemukan bukti awal yang cukup, langkah selanjutnya yang dapat diambil Komnas HAM adalah...",
          o: [
            "Langsung membawa kasus tersebut ke Pengadilan HAM.",
            "Menyerahkan hasil penyelidikan kepada Kejaksaan Agung untuk ditindaklanjuti melalui proses penyidikan.",
            "Menerbitkan rekomendasi kepada Presiden untuk membentuk Pengadilan HAM Ad Hoc.",
            "Meminta Mahkamah Konstitusi untuk mengeluarkan putusan sela.",
            "Mengajukan gugatan perdata atas nama korban kepada pihak yang diduga pelaku.",
          ],
          a: 1,
        },
        {
          q: "Keberadaan Dewan Perwakilan Daerah (DPD) dimaksudkan untuk menjamin aspirasi daerah dalam sistem kenegaraan. Namun, dalam praktiknya, kewenangan DPD sering dianggap terbatas. Batasan utama kewenangan DPD dalam fungsi legislasi terletak pada...",
          o: [
            "Tidak dapat mengajukan RUU apa pun kepada DPR.",
            "Hanya dapat memberikan pertimbangan tanpa memiliki hak veto terhadap RUU yang dibahas.",
            "Keterlibatannya hanya pada pembahasan RUU anggaran.",
            "Tidak memiliki hak interplasi dan angket terhadap pemerintah.",
            "Anggotanya dipilih secara tidak langsung oleh Dewan Perwakilan Rakyat Daerah.",
          ],
          a: 1,
        },
        {
          q: "Sebuah lembaga negara menyatakan bahwa sebuah Peraturan Pemerintah (PP) bertentangan dengan Undang-Undang yang lebih tinggi. Lembaga yang memiliki kewenangan untuk membatalkan Peraturan Pemerintah tersebut adalah...",
          o: [
            "Mahkamah Konstitusi.",
            "Mahkamah Agung.",
            "Dewan Perwakilan Rakyat.",
            "Presiden.",
            "Menteri Hukum dan HAM.",
          ],
          a: 1,
        },
        {
          q: "Untuk menjaga independensi, Komisi Pemilihan Umum (KPU) sebagai penyelenggara pemilu memiliki kewenangan khusus. Jika terjadi sengketa hasil pemilu legislatif di tingkat kabupaten/kota, lembaga yang berwenang untuk menyelesaikannya adalah...",
          o: [
            "Mahkamah Konstitusi.",
            "Mahkamah Agung melalui Pengadilan Tata Usaha Negara.",
            "KPU Provinsi.",
            "Bawaslu.",
            "Pengadilan Negeri setempat.",
          ],
          a: 3,
        },
        {
          q: "Presiden memberhentikan seorang menteri karena dianggap tidak sejalan dengan visi pemerintah. Tindakan Presiden ini adalah wewenang konstitusionalnya, namun sebagai bagian dari mekanisme akuntabilitas, Dewan Perwakilan Rakyat dapat menggunakan alat-alat pengawasan untuk menanggapi keputusan tersebut. Salah satu alat pengawasan yang paling relevan untuk digunakan dalam konteks ini adalah...",
          o: [
            "Hak angket untuk menyelidiki keputusan Presiden tersebut.",
            "Hak interpelasi untuk meminta penjelasan Presiden.",
            "Mengajukan mosi tidak percaya kepada kabinet.",
            "Membentuk Panitia Khusus (Pansus) untuk menilai kinerja menteri yang lain.",
            "Menolak membahas RAPBN yang diajukan pemerintah.",
          ],
          a: 1,
        },
        {
          q: "Sistem presidensial di Indonesia menganut asas 'presiden bertanggung jawab kepada rakyat, bukan kepada parlemen'. Namun, mekanisme kontrol terhadap presiden tetap ada. Mekanisme kontrol yang bersifat politis dan paling efektif untuk menjaga agar Presiden tidak menyalahgunakan kewenangannya adalah...",
          o: [
            "Putusan Mahkamah Konstitusi yang dapat membatalkan keputusan Presiden.",
            "Laporan pemeriksaan Badan Pemeriksa Keuangan (BPK) terhadap keuangan negara.",
            "Hak menyatakan pendapat DPR yang dapat berujung pada proses pemakzulan.",
            "Pertimbangan dari Dewan Pertimbangan Presiden (Wantimpres).",
            "Pengawasan yang dilakukan oleh Komisi Pemberantasan Korupsi (KPK).",
          ],
          a: 2,
        },
      ].map((x) => ({
        type: "trias politica",
        q: x.q,
        options: x.o,
        answer: x.a,
      }));

      S_fungsi = shuffle(SOAL_fungsi);

      /*  Validasi jumlah
          if(SINONIM.length!==90||ANTONIM.length!==90){
            console.warn('Jumlah soal tidak 90/90:', SINONIM.length, ANTONIM.length);
          }  */

      // /* Gabung & acak
      function shuffleOptions(q) {
        let opts = q.options.map((opt, i) => ({ opt, i }));
        opts = shuffle(opts); // pake fungsi shuffle yang sudah kamu punya
        let newAnswer = opts.findIndex((o) => o.i === q.answer);
        return {
          ...q,
          options: opts.map((o) => o.opt),
          answer: newAnswer,
        };
      }
      //*/
      let QUESTIONS = [...S_fungsi].map((q, i) => ({
        id: i + 1,
        ...shuffleOptions(q),
      }));
      // let QUESTIONS = [...SINONIM, ...ANTONIM].map((q,i)=>({id:i+1, ...q }));
      // State
      let state = {
        user: null,
        timeLeft: 20 * 60, // 25 menit
        currentIndex: 0,
        answers: Array(180).fill(null), // simpan index jawaban (0..3) atau null
      };

      /** RENDERING **/
      function formatTime(s) {
        const m = Math.floor(s / 60)
          .toString()
          .padStart(2, "0");
        const r = (s % 60).toString().padStart(2, "0");
        return `${m}:${r}`;
      }

      function renderTimer() {
        el("#timer").textContent = formatTime(state.timeLeft);
        if (state.timeLeft <= 60) {
          el("#timer").style.background = "#331a1a";
          el("#timer").style.borderColor = "#7f1d1d";
        }
        if (state.timeLeft <= 0) {
          submitQuiz();
        }
      }

      let tick = null;
      function startTimer() {
        if (tick) clearInterval(tick);
        tick = setInterval(() => {
          state.timeLeft--;
          renderTimer();
          if (state.timeLeft <= 0) clearInterval(tick);
        }, 1000);
      }

      function mountNav() {
        const nav = el("#nav");
        nav.innerHTML = "";
        QUESTIONS.forEach((q, idx) => {
          const b = document.createElement("button");
          b.textContent = idx + 1;
          b.addEventListener("click", () => {
            goTo(idx);
          });
          nav.appendChild(b);
        });
        updateNavActive();
      }

      function updateNavActive() {
        const buttons = els("#nav button");
        buttons.forEach((b, idx) => {
          b.classList.toggle("active", idx === state.currentIndex);
          b.classList.toggle("done", state.answers[idx] !== null);
        });
        el("#infoSoal").textContent = `Soal ${state.currentIndex + 1} / ${
          QUESTIONS.length
        }`;
        el("#infoKategori").textContent = `Kategori: ${QUESTIONS[
          state.currentIndex
        ].type.toUpperCase()}`;
      }

      function renderQuestion() {
        const q = QUESTIONS[state.currentIndex];
        const container = el("#questionArea");
        container.innerHTML = "";
        const title = document.createElement("div");
        title.className = "q-title";

        title.innerHTML = q.q;
        container.appendChild(title);

        const list = document.createElement("div");
        list.className = "choices";
        q.options.forEach((opt, i) => {
          const row = document.createElement("label");
          row.className = "choice";
          const input = document.createElement("input");
          input.type = "radio";
          input.name = "choice";
          input.value = i;
          input.checked = state.answers[state.currentIndex] === i;
          input.addEventListener("change", () => {
            state.answers[state.currentIndex] = i;
            updateNavActive();
          });
          const span = document.createElement("div");
          span.innerHTML = opt;
          row.appendChild(input);
          row.appendChild(span);
          list.appendChild(row);
        });
        container.appendChild(list);
        MathJax.typeset();
      }

      function goTo(idx) {
        state.currentIndex = Math.max(0, Math.min(QUESTIONS.length - 1, idx));
        updateNavActive();
        renderQuestion();
      }

      function next() {
        if (state.currentIndex < QUESTIONS.length - 1) {
          goTo(state.currentIndex + 1);
        }
      }
      function prev() {
        if (state.currentIndex > 0) {
          goTo(state.currentIndex - 1);
        }
      }

      function resetAnswers() {
        if (!confirm("Yakin reset semua jawaban?")) return;
        state.answers = Array(QUESTIONS.length).fill(null);
        updateNavActive();
        renderQuestion();
      }

      function submitQuiz() {
        // hitung skor per kategori
        let sSin = 0,
          sAnt = 0,
          sHip = 0;
        QUESTIONS.forEach((q, idx) => {
          const pick = state.answers[idx];
          const correct = q.answer;
          if (pick === correct) {
            if (q.type === "trias politica") sSin++;
          }
        });
        const total = sSin + sAnt + sHip;

        // tampilkan
        let total_question = QUESTIONS.length;

        el("#scoreTotal").textContent = `${total} / ${total_question}`;
        el("#resultUser").textContent = `Peserta: ${
          state.user?.nama || "-"
        } (waktu habis/kumpul)`;

        // stop timer, ganti section
        if (tick) clearInterval(tick);
        showSection("result");
        window.scrollTo({ top: 0, behavior: "smooth" });
      }

      function showSection(which) {
        el("#section-form").classList.remove("active");
        el("#section-quiz").classList.remove("active");
        el("#section-result").classList.remove("active");
        if (which === "form") el("#section-form").classList.add("active");
        if (which === "quiz") el("#section-quiz").classList.add("active");
        if (which === "result") el("#section-result").classList.add("active");
      }

      // EVENTS
      el("#btnMulai").addEventListener("click", () => {
        const nama = el("#nama").value.trim();
        const pass = el("#pass").value.trim();
        if (!nama || !pass) {
          alert("Nama dan password wajib diisi.");
          return;
        }
        if (pass !== "DPR") {
          alert(
            "password salah! tanya password ke sir hardi. klo sir hardi dak tau tanya ke sir meca"
          );
          return;
        }
        state.user = { nama, pass };
        el("#infoUser").textContent = `Peserta: ${nama}`;
        showSection("quiz");
        startTimer();
        mountNav();
        goTo(0);
        renderTimer();
      });

      el("#prevBtn").addEventListener("click", prev);
      el("#nextBtn").addEventListener("click", next);
      el("#btnReset").addEventListener("click", resetAnswers);
      el("#btnSubmit").addEventListener("click", () => {
        if (confirm("Kumpulkan jawaban sekarang?")) submitQuiz();
      });

      // Keyboard nav: panah kiri/kanan, angka 1-4 untuk memilih A-D
      window.addEventListener("keydown", (e) => {
        if (!el("#section-quiz").classList.contains("active")) return;
        if (e.key === "ArrowRight") next();
        if (e.key === "ArrowLeft") prev();
        if (["1", "2", "3", "4"].includes(e.key)) {
          const idx = parseInt(e.key) - 1;
          state.answers[state.currentIndex] = idx;
          updateNavActive();
          renderQuestion();
        }
      });

      // Ulang dari hasil
      el("#btnUlang").addEventListener("click", () => {
        state = {
          user: state.user,
          timeLeft: 15 * 60,
          currentIndex: 0,
          answers: Array(180).fill(null),
        };
        QUESTIONS = shuffle(QUESTIONS); // acak ulang urutan
        showSection("quiz");
        startTimer();
        mountNav();
        goTo(0);
        renderTimer();
      });
    </script>
  </body>
</html>
