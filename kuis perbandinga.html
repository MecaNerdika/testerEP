<!DOCTYPE html>
<html lang="id">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Kuis Perbandingan Senilai, Berbalik nilai dan OSW</title>
  <style>
    :root{
      --bg:#060000;       /* slate-900 */
      --card:#111827;     /* gray-900 */
      --muted:#334155;    /* slate-600 */
      --text:#ffffff;     /* gray-200 */
      --accent:#38bdf8;   /* sky-400 */
      --accent-2:#22c55e; /* green-500 */
      --danger:#ef4444;   /* red-500 */
      --warn:#f59e0b;     /* amber-500 */
      --shadow: 0 8px 24px rgba(0,0,0,.35);
      --radius: 16px;
    }
    *{box-sizing:border-box}
    body{
      margin:0; font-family: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, "Helvetica Neue", Arial;
      background: radial-gradient(1200px 800px at 10% -10%, #1e293b, transparent),
                  radial-gradient(800px 600px at 120% 0%, #0b3b47, transparent),
                  var(--bg);
      color:var(--text);
      min-height:100svh; display:flex; align-items:center; justify-content:center; padding:24px;
    }
    .app{width:100%; max-width:980px}
    header{
      display:flex; align-items:center; justify-content:space-between; gap:12px; margin-bottom:16px;
    }
    .brand{font-weight:800; letter-spacing:.5px; font-size:clamp(18px,3.5vw,24px)}
    .timer{font-variant-numeric:tabular-nums; font-weight:700; padding:10px 14px; border-radius:999px; background:#0b1220; border:1px solid #1f2a44; box-shadow:var(--shadow)}
    .card{background:linear-gradient(180deg,#0b1220,#0a1020); border:1px solid #1f2a44; border-radius:var(--radius); box-shadow:var(--shadow)}
    .section{display:none}
    .active{display:block}
    .card-inner{padding:20px}
    .grid{display:grid; gap:16px}
    .grid-2{grid-template-columns: 1fr 1fr}
    .grid-responsive{grid-template-columns: 1fr;}
    @media (min-width:720px){ .grid-responsive{grid-template-columns: 1fr 320px} }

    input[type="text"], input[type="password"]{
      width:100%; padding:12px 14px; border-radius:12px; border:1px solid #26314d; background:#0b1220; color:var(--text);
      outline:none; box-shadow:inset 0 0 0 9999px rgba(255,255,255,0);
    }
    label{font-size:14px; color:#cbd5e1}
    .btn{cursor:pointer; padding:12px 16px; border-radius:14px; background:var(--accent); color:#001219; border:none; font-weight:700; box-shadow:var(--shadow); transition:.2s transform ease;}
    .btn:active{transform:translateY(1px)}
    .btn.secondary{background:#1f2937; color:#e2e8f0; border:1px solid #334155}
    .btn.warn{background:var(--warn); color:#0b1220}
    .btn.danger{background:var(--danger); color:#0b1220}
    .muted{color:#94a3b8}
    .pill{display:inline-flex; align-items:center; gap:8px; padding:6px 10px; border-radius:999px; background:#0b1220; border:1px solid #223156; font-size:12px; color:#cbd5e1}

    .question-area{display:flex; flex-direction:column; gap:14px}
    .q-title{font-weight:800; font-size:18px}
    .choices{display:grid; gap:10px}
    .choice{display:flex; gap:10px; align-items:flex-start; border:1px solid #1f2a44; background:#0b1220; padding:12px; border-radius:12px; cursor:pointer}
    .choice input{margin-top:4px}

    .nav{display:flex; gap:10px; flex-wrap:wrap; max-height:240px; overflow:auto; padding:10px}
    .nav button{width:44px; height:40px; border-radius:10px; border:1px solid #1f2a44; background:#0b1220; color:#cbd5e1; font-weight:700; cursor:pointer}
    .nav button.active{outline:2px solid var(--accent); color:#0ea5e9}
    .nav button.done{background:#07291f; border-color:#0b7a53; color:#34d399}

    .footer-actions{display:flex; align-items:center; justify-content:space-between; gap:10px; margin-top:10px}

    .legend{display:flex; gap:8px; flex-wrap:wrap}

    .results{display:grid; gap:12px}
    .score-box{display:grid; grid-template-columns:1fr 1fr; gap:10px}
    .score-card{background:#0b1220; border:1px solid #1f2a44; border-radius:14px; padding:14px}

    .info-row{display:flex; gap:10px; flex-wrap:wrap; align-items:center; justify-content:space-between}
  </style>
</head>
<body>
  <div class="app">
    <header>
      <div class="brand">kuiz Perbandingan Senilai, Berbalik nilai dan OSW </div>
      <div class="pill" id="infoUser">Belum login</div>
      <div class="timer" id="timer">15:00</div>
    </header>

    <!-- SECTION 1: FORM MINIMAL -->
    <section id="section-form" class="section active">
      <div class="card">
        <div class="card-inner grid">
          <div>
            <h2 style="margin:0 0 10px 0">Masuk Kuis</h2>
            <p class="muted" style="margin-top:0">Masukkan nama dan password untuk memulai. Tidak ada pengaturan tambahan.</p>
            <div class="grid">
              <div>
                <label for="nama">Nama</label>
                <input id="nama" type="text" placeholder="Nama peserta" />
              </div>
              <div>
                <label for="pass">Password</label>
                <input id="pass" type="password" placeholder="Password" />
              </div>
              <button class="btn" id="btnMulai">Mulai Kuis</button>
            </div>
          </div>
        </div>
      </div>
    </section>

    <!-- SECTION 2: QUIZ -->
    <section id="section-quiz" class="section">
      <div class="grid grid-responsive">
        <div class="card">
          <div class="card-inner">
            <div class="info-row">
              <div class="pill" id="infoKategori">Kategori: -</div>
              <div class="pill" id="infoSoal">Soal 0 / 180</div>
            </div>
            <div class="question-area" id="questionArea">
              <!-- Question inject here -->
            </div>
            <div class="footer-actions">
              <button class="btn secondary" id="prevBtn">Prev</button>
              <div class="legend">
                <span class="pill">• Biru = aktif</span>
                <span class="pill" style="background:#07291f; color:#34d399; border-color:#0b7a53">• Hijau = terjawab</span>
              </div>
              <button class="btn" id="nextBtn">Next</button>
            </div>
          </div>
        </div>
        <div class="card">
          <div class="card-inner">
            <h3 style="margin-top:0">Navigasi Soal</h3>
            <div class="nav" id="nav">
              <!-- Nav buttons injected here -->
            </div>
            <div class="grid" style="margin-top:8px">
              <button class="btn warn" id="btnSubmit">Kumpulkan Jawaban</button>
              <button class="btn danger" id="btnReset">Reset Jawaban</button>
            </div>
          </div>
        </div>
      </div>
    </section>

    <!-- SECTION 3: HASIL -->
    <section id="section-result" class="section">
      <div class="card">
        <div class="card-inner results">
          <h2 style="margin:0">Hasil Ujian</h2>
          <p class="muted" id="resultUser">Peserta: -</p>
          <div class="score-box">
            <div class="score-card" style="grid-column: span 2">
              <div class="muted">Total Skor</div>
              <div id="scoreTotal" style="font-size:30px; font-weight:900">0 / 180</div>
            </div>
          </div>
          <div>
            <button class="btn" id="btnUlang">Mulai Lagi</button>
          </div>
        </div>
      </div>
    </section>
  </div>

  <script>
    /** UTIL **/
    const el = (sel) => document.querySelector(sel);
    const els = (sel) => Array.from(document.querySelectorAll(sel));
    const shuffle = (arr) => arr.map(v=>[Math.random(),v]).sort((a,b)=>a[0]-b[0]).map(x=>x[1]);

    /** BANK SOAL (40/40/40) **/
    // Format: {type:'sinonim'|'antonim'|'hiponim', q:'', options:['','','',''], answer: index}

    const SOAL_SATUAN = [

  { q: "Sebuah mobil menempuh jarak 120 km dengan 10 liter bensin. Berapa liter bensin yang diperlukan untuk menempuh 180 km dengan kondisi yang sama?", 
    o: ["12 liter", "15 liter", "18 liter", "20 liter"], 
    a: 1 },

  { q: "Untuk membuat 12 gelas jus jeruk diperlukan 9 buah jeruk. Berapa banyak jeruk yang dibutuhkan untuk membuat 20 gelas jus?", 
    o: ["12 buah", "14 buah", "15 buah", "18 buah"], 
    a: 2 },

  { q: "5 pekerja dapat menyelesaikan sebuah pekerjaan dalam 12 hari. Berapa hari diperlukan jika pekerja ditambah menjadi 15 orang (asumsi kerja senilai)?", 
    o: ["3 hari", "4 hari", "6 hari", "8 hari"], 
    a: 1 },

  { q: "Dalam 3 jam, mesin cetak dapat mencetak 900 lembar kertas. Berapa lembar yang dapat dicetak dalam 8 jam?", 
    o: ["2200 lembar", "2300 lembar", "2400 lembar", "2600 lembar"], 
    a: 2 },

  { q: "Harga 4 kg apel adalah Rp48.000. Berapakah harga 7 kg apel?", 
    o: ["Rp70.000", "Rp78.000", "Rp84.000", "Rp88.000"], 
    a: 2 },

  { q: "Sebuah pekerjaan dapat diselesaikan oleh 12 orang dalam 18 hari. Jika jumlah pekerja ditambah menjadi 36 orang, berapa hari pekerjaan selesai?", 
    o: ["4 hari", "6 hari", "9 hari", "12 hari"], 
    a: 1 },

  { q: "8 mesin dapat menyelesaikan produksi dalam 15 jam. Berapa lama waktu yang dibutuhkan jika hanya 5 mesin yang digunakan?", 
    o: ["18 jam", "20 jam", "24 jam", "30 jam"], 
    a: 2 },

  { q: "24 siswa dapat menghabiskan makanan dalam 6 jam. Jika hanya ada 8 siswa, berapa lama makanan tersebut akan habis?", 
    o: ["12 jam", "15 jam", "18 jam", "24 jam"], 
    a: 2 },

  { q: "Sebuah tangki air dapat dikosongkan dalam 20 menit dengan menggunakan 6 pipa yang sama. Jika hanya digunakan 4 pipa, berapa menit yang dibutuhkan?", 
    o: ["25 menit", "30 menit", "35 menit", "40 menit"], 
    a: 1 },

  { q: "Sebuah pekerjaan bisa selesai dalam 10 hari oleh 25 pekerja. Jika hanya ada 5 pekerja, berapa hari pekerjaan itu akan selesai?", 
    o: ["30 hari", "40 hari", "50 hari", "60 hari"], 
    a: 2 },

  { q: "10 orang pekerja dapat menyelesaikan 1 rumah dalam 20 hari. Berapa hari yang dibutuhkan oleh 15 orang pekerja untuk menyelesaikan 3 rumah dengan kemampuan sama?", 
    o: ["30 hari", "40 hari", "45 hari", "60 hari"], 
    a: 1 },

  { q: "4 mesin dapat menghasilkan 1.200 botol minuman dalam 6 jam. Berapa botol yang dapat dihasilkan oleh 6 mesin dalam 8 jam?", 
    o: ["1.800 botol", "2.000 botol", "2.400 botol", "2.600 botol"], 
    a: 2 },

  { q: "12 penjahit dapat membuat 24 baju dalam 10 hari. Berapa baju yang dapat dibuat oleh 18 penjahit dalam 15 hari?", 
    o: ["45 baju", "48 baju", "54 baju", "60 baju"], 
    a: 2 },

  { q: "Sebuah proyek dapat diselesaikan oleh 20 pekerja dalam 18 hari. Jika proyek diperbanyak menjadi 3 proyek, dan jumlah pekerja ditambah menjadi 60 orang, berapa hari proyek selesai?", 
    o: ["12 hari", "15 hari", "18 hari", "36 hari"], 
    a: 2 },

  { q: "5 mesin dapat mencetak 2.000 buku dalam 10 hari. Berapa banyak buku yang dapat dicetak oleh 8 mesin dalam 15 hari?", 
    o: ["4.000 buku", "4.500 buku", "4.800 buku", "5.000 buku"], 
    a: 2 }
    ].map(x=>({type:'perbandingan', q:x.q, options:x.o, answer:x.a}));

    
    
    S_SATUAN = shuffle(SOAL_SATUAN)

    /*  Validasi jumlah
    if(SINONIM.length!==90||ANTONIM.length!==90){
      console.warn('Jumlah soal tidak 90/90:', SINONIM.length, ANTONIM.length);
    }  */

    // /* Gabung & acak
    function shuffleOptions(q){  
        let opts = q.options.map((opt, i) => ({opt, i}));
        opts = shuffle(opts); // pake fungsi shuffle yang sudah kamu punya
        let newAnswer = opts.findIndex(o => o.i === q.answer);
        return {
            ...q,
            options: opts.map(o => o.opt),
            answer: newAnswer
  };
  
}
//*/
    let QUESTIONS = [...S_SATUAN].map((q,i)=>({id:i+1, ...shuffleOptions(q)}));
    // let QUESTIONS = [...SINONIM, ...ANTONIM].map((q,i)=>({id:i+1, ...q }));
    // State
    let state = {
      user:null,
      timeLeft: 25*60, // 25 menit
      currentIndex: 0,
      answers: Array(180).fill(null), // simpan index jawaban (0..3) atau null
    };

    /** RENDERING **/
    function formatTime(s){
      const m = Math.floor(s/60).toString().padStart(2,'0');
      const r = (s%60).toString().padStart(2,'0');
      return `${m}:${r}`;
    }

    function renderTimer(){
      el('#timer').textContent = formatTime(state.timeLeft);
      if(state.timeLeft <= 60){ el('#timer').style.background = '#331a1a'; el('#timer').style.borderColor = '#7f1d1d'; }
      if(state.timeLeft <= 0){
        submitQuiz();
      }
    }

    let tick = null;
    function startTimer(){
      if(tick) clearInterval(tick);
      tick = setInterval(()=>{ state.timeLeft--; renderTimer(); if(state.timeLeft<=0) clearInterval(tick); }, 1000);
    }

    function mountNav(){
      const nav = el('#nav');
      nav.innerHTML = '';
      QUESTIONS.forEach((q,idx)=>{
        const b = document.createElement('button');
        b.textContent = idx+1;
        b.addEventListener('click', ()=>{ goTo(idx); });
        nav.appendChild(b);
      });
      updateNavActive();
    }

    function updateNavActive(){
      const buttons = els('#nav button');
      buttons.forEach((b,idx)=>{
        b.classList.toggle('active', idx===state.currentIndex);
        b.classList.toggle('done', state.answers[idx]!==null);
      });
      el('#infoSoal').textContent = `Soal ${state.currentIndex+1} / ${QUESTIONS.length}`;
      el('#infoKategori').textContent = `Kategori: ${QUESTIONS[state.currentIndex].type.toUpperCase()}`;
    }

    function renderQuestion(){
      const q = QUESTIONS[state.currentIndex];
      const container = el('#questionArea');
      container.innerHTML = '';
      const title = document.createElement('div');
      title.className = 'q-title';
      title.textContent = q.q;
      container.appendChild(title);

      const list = document.createElement('div');
      list.className = 'choices';
      q.options.forEach((opt, i)=>{
        const row = document.createElement('label');
        row.className = 'choice';
        const input = document.createElement('input');
        input.type = 'radio'; input.name = 'choice'; input.value = i;
        input.checked = state.answers[state.currentIndex]===i;
        input.addEventListener('change', ()=>{
          state.answers[state.currentIndex]=i;
          updateNavActive();
        });
        const span = document.createElement('div');
        span.textContent = opt;
        row.appendChild(input); row.appendChild(span); list.appendChild(row);
      });
      container.appendChild(list);
    }

    function goTo(idx){
      state.currentIndex = Math.max(0, Math.min(QUESTIONS.length-1, idx));
      updateNavActive();
      renderQuestion();
    }

    function next(){ if(state.currentIndex < QUESTIONS.length-1){ goTo(state.currentIndex+1); } }
    function prev(){ if(state.currentIndex > 0){ goTo(state.currentIndex-1); } }

    function resetAnswers(){
      if(!confirm('Yakin reset semua jawaban?')) return;
      state.answers = Array(QUESTIONS.length).fill(null);
      updateNavActive();
      renderQuestion();
    }

    function submitQuiz(){
      // hitung skor per kategori
      let sSin=0, sAnt=0, sHip=0;
      QUESTIONS.forEach((q,idx)=>{
        const pick = state.answers[idx];
        const correct = q.answer;
        if(pick===correct){
          if(q.type==='perbandingan') sSin++;
        }
      });
      const total = sSin + sAnt + sHip;

      // tampilkan
      let total_question= QUESTIONS.length

      el('#scoreTotal').textContent = `${total} / ${total_question}`;
      el('#resultUser').textContent = `Peserta: ${state.user?.nama || '-'} (waktu habis/kumpul)`;

      // stop timer, ganti section
      if(tick) clearInterval(tick);
      showSection('result');
      window.scrollTo({top:0, behavior:'smooth'});
    }

    function showSection(which){
      el('#section-form').classList.remove('active');
      el('#section-quiz').classList.remove('active');
      el('#section-result').classList.remove('active');
      if(which==='form') el('#section-form').classList.add('active');
      if(which==='quiz') el('#section-quiz').classList.add('active');
      if(which==='result') el('#section-result').classList.add('active');
    }

    // EVENTS
    el('#btnMulai').addEventListener('click', ()=>{
      const nama = el('#nama').value.trim();
      const pass = el('#pass').value.trim();
      if(!nama || !pass){ alert('Nama dan password wajib diisi.'); return; }
      if(pass!=="BALIK"){
        alert("password salah! tanya password ke sir hardi. klo sir hardi dak tau tanya ke sir meca");
        return;
      }
      state.user = {nama, pass};
      el('#infoUser').textContent = `Peserta: ${nama}`;
      showSection('quiz');
      startTimer();
      mountNav();
      goTo(0);
      renderTimer();
    });

    el('#prevBtn').addEventListener('click', prev);
    el('#nextBtn').addEventListener('click', next);
    el('#btnReset').addEventListener('click', resetAnswers);
    el('#btnSubmit').addEventListener('click', ()=>{
      if(confirm('Kumpulkan jawaban sekarang?')) submitQuiz();
    });

    // Keyboard nav: panah kiri/kanan, angka 1-4 untuk memilih A-D
    window.addEventListener('keydown', (e)=>{
      if(!el('#section-quiz').classList.contains('active')) return;
      if(e.key==='ArrowRight') next();
      if(e.key==='ArrowLeft') prev();
      if(['1','2','3','4'].includes(e.key)){
        const idx = parseInt(e.key)-1;
        state.answers[state.currentIndex]=idx;
        updateNavActive();
        renderQuestion();
      }
    });

    // Ulang dari hasil
    el('#btnUlang').addEventListener('click', ()=>{
      state = { user: state.user, timeLeft: 15*60, currentIndex: 0, answers: Array(180).fill(null)};
      QUESTIONS = shuffle(QUESTIONS); // acak ulang urutan
      showSection('quiz');
      startTimer();
      mountNav();
      goTo(0);
      renderTimer();
    });

  </script>
</body>
</html>
