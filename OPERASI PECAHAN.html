<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Kuis Operasi Pecahan</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap');
        
        body {
            font-family: 'Inter', sans-serif;
        }
        
        .fade-in {
            animation: fadeIn 0.5s ease-in;
        }
        
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }
        
        .pulse-animation {
            animation: pulse 2s infinite;
        }
        
        @keyframes pulse {
            0% { transform: scale(1); }
            50% { transform: scale(1.05); }
            100% { transform: scale(1); }
        }
        
        .timer-warning {
            animation: warning 1s infinite;
        }
        
        @keyframes warning {
            0%, 100% { color: #ef4444; }
            50% { color: #dc2626; }
        }
        
        .option-card {
            transition: all 0.3s ease;
        }
        
        .option-card:hover {
            transform: translateX(5px);
            box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1);
        }
        
        .selected {
            background-color: #3b82f6 !important;
            color: white !important;
        }
        
        .correct {
            background-color: #10b981 !important;
            color: white !important;
        }
        
        .incorrect {
            background-color: #ef4444 !important;
            color: white !important;
        }
    </style>
</head>
<body class="bg-gradient-to-br from-blue-50 to-indigo-100 min-h-screen">
    <!-- Start Screen -->
    <div id="startScreen" class="min-h-screen flex items-center justify-center p-4">
        <div class="bg-white rounded-2xl shadow-2xl p-8 md:p-12 max-w-md w-full fade-in">
            <div class="text-center mb-8">
                <div class="inline-flex items-center justify-center w-20 h-20 bg-blue-500 rounded-full mb-4">
                    <i class="fas fa-calculator text-white text-3xl"></i>
                </div>
                <h1 class="text-3xl font-bold text-gray-800 mb-2">Kuis Operasi Pecahan</h1>
                <p class="text-gray-600">Uji pengetahuanmu tentang pecahan dan pecahan campuran!</p>
            </div>
            
            <form id="startForm" class="space-y-6">
                <div>
                    <label class="block text-sm font-medium text-gray-700 mb-2">
                        <i class="fas fa-user mr-2"></i>Nama Lengkap
                    </label>
                    <input type="text" id="fullName" required 
                           class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition duration-200"
                           placeholder="Masukkan nama lengkap">
                </div>
                
                <div>
                    <label class="block text-sm font-medium text-gray-700 mb-2">
                        <i class="fas fa-key mr-2"></i>Token Ujian
                    </label>
                    <input type="password" id="examToken" required 
                           class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition duration-200"
                           placeholder="Masukkan token ujian">
                    <p class="text-xs text-gray-500 mt-1">Token akan diberikan oleh pengawas</p>
                </div>
                
                <button type="submit" 
                        class="w-full bg-blue-500 hover:bg-blue-600 text-white font-semibold py-3 px-6 rounded-lg transition duration-200 transform hover:scale-105">
                    <i class="fas fa-play mr-2"></i>Mulai Kuis
                </button>
            </form>
            
            <div class="mt-8 text-center text-sm text-gray-500">
                <p><i class="fas fa-clock mr-1"></i>Waktu pengerjaan: 10 menit</p>
                <p><i class="fas fa-question-circle mr-1"></i>Total soal: 20 pilihan ganda</p>
            </div>
        </div>
    </div>

    <!-- Quiz Screen -->
    <div id="quizScreen" class="hidden min-h-screen p-4">
        <div class="max-w-4xl mx-auto">
            <!-- Header -->
            <div class="bg-white rounded-t-2xl shadow-lg p-6">
                <div class="flex flex-col md:flex-row justify-between items-center">
                    <div>
                        <h2 class="text-2xl font-bold text-gray-800">Kuis Operasi Pecahan</h2>
                        <p class="text-gray-600">Peserta: <span id="participantName" class="font-semibold"></span></p>
                    </div>
                    <div class="mt-4 md:mt-0 text-center">
                        <div id="timer" class="text-3xl font-bold text-blue-600">
                            <i class="fas fa-clock mr-2"></i><span id="timeDisplay">10:00</span>
                        </div>
                        <p class="text-sm text-gray-500">Waktu tersisa</p>
                    </div>
                </div>
                
                <!-- Progress Bar -->
                <div class="mt-6">
                    <div class="flex justify-between text-sm text-gray-600 mb-2">
                        <span>Progress</span>
                        <span id="progressText">1/20</span>
                    </div>
                    <div class="w-full bg-gray-200 rounded-full h-3">
                        <div id="progressBar" class="bg-blue-500 h-3 rounded-full transition-all duration-300" style="width: 5%"></div>
                    </div>
                </div>
            </div>

            <!-- Question Container -->
            <div class="bg-white rounded-b-2xl shadow-lg p-8">
                <div id="questionContainer" class="fade-in">
                    <!-- Question will be inserted here -->
                </div>
                
                <!-- Navigation Buttons -->
                <div class="flex justify-between mt-8">
                    <button id="prevBtn" onclick="previousQuestion()" 
                            class="bg-gray-300 hover:bg-gray-400 text-gray-700 font-semibold py-2 px-6 rounded-lg transition duration-200 disabled:opacity-50 disabled:cursor-not-allowed">
                        <i class="fas fa-arrow-left mr-2"></i>Sebelumnya
                    </button>
                    <button id="nextBtn" onclick="nextQuestion()" 
                            class="bg-blue-500 hover:bg-blue-600 text-white font-semibold py-2 px-6 rounded-lg transition duration-200">
                        Selanjutnya<i class="fas fa-arrow-right ml-2"></i>
                    </button>
                    <button id="finishBtn" onclick="finishQuiz()" 
                            class="hidden bg-green-500 hover:bg-green-600 text-white font-semibold py-2 px-6 rounded-lg transition duration-200 pulse-animation">
                        <i class="fas fa-check mr-2"></i>Selesai
                    </button>
                </div>
            </div>
        </div>
    </div>

    <!-- Result Screen -->
    <div id="resultScreen" class="hidden min-h-screen flex items-center justify-center p-4">
        <div class="bg-white rounded-2xl shadow-2xl p-8 md:p-12 max-w-md w-full fade-in text-center">
            <div class="mb-8">
                <div id="resultIcon" class="inline-flex items-center justify-center w-24 h-24 rounded-full mb-4">
                    <!-- Icon will be inserted based on score -->
                </div>
                <h2 class="text-3xl font-bold text-gray-800 mb-2">Hasil Kuis</h2>
                <p class="text-gray-600">Peserta: <span id="resultName" class="font-semibold"></span></p>
            </div>
            
            <div class="bg-gray-50 rounded-xl p-6 mb-8">
                <div class="text-5xl font-bold text-blue-600 mb-2">
                    <span id="scoreDisplay">0</span>/20
                </div>
                <div class="text-lg text-gray-600">
                    Nilai: <span id="percentage" class="font-semibold">0%</span>
                </div>
            </div>
            
            <div id="resultMessage" class="mb-8 text-lg">
                <!-- Message will be inserted based on score -->
            </div>
            
            <button onclick="location.reload()" 
                    class="bg-blue-500 hover:bg-blue-600 text-white font-semibold py-3 px-8 rounded-lg transition duration-200 transform hover:scale-105">
                <i class="fas fa-redo mr-2"></i>Kerjakan Lagi
            </button>
        </div>
    </div>

    <script>
        // Quiz Data
        const questions = [
            {
                question: "Hasil dari 2/3 + 1/4 adalah...",
                options: ["5/7", "11/12", "3/7", "8/12", "5/12"],
                correct: 1
            },
            {
                question: "3 1/2 - 1 1/4 = ...",
                options: ["2 1/4", "2 2/4", "2 3/4", "1 3/4", "2 1/2"],
                correct: 0
            },
            {
                question: "Hasil perkalian 2/5 Ã— 3/4 adalah...",
                options: ["6/20", "5/9", "6/9", "5/20", "3/5"],
                correct: 0
            },
            {
                question: "5/6 : 2/3 = ...",
                options: ["10/18", "15/12", "5/4", "7/9", "3/4"],
                correct: 1
            },
            {
                question: "Ubah pecahan campuran 4 2/5 menjadi pecahan biasa!",
                options: ["20/5", "22/5", "18/5", "12/5", "8/5"],
                correct: 1
            },
            {
                question: "Hasil dari 1/2 + 2/3 + 1/6 adalah...",
                options: ["4/11", "6/11", "1", "4/6", "3/6"],
                correct: 2
            },
            {
                question: "7 3/8 - 3 5/8 = ...",
                options: ["4 2/8", "3 6/8", "4 1/2", "3 3/4", "4 3/4"],
                correct: 1
            },
            {
                question: "3/4 Ã— 2/5 Ã— 5/6 = ...",
                options: ["30/120", "15/60", "1/2", "1/4", "3/8"],
                correct: 2
            },
            {
                question: "Ubah 24/8 menjadi pecahan campuran!",
                options: ["2 4/8", "3", "2 8/8", "3 0/8", "2 6/8"],
                correct: 1
            },
            {
                question: "Hasil dari 5/6 - 1/3 adalah...",
                options: ["4/3", "1/2", "3/6", "2/3", "4/9"],
                correct: 1
            },
            {
                question: "2 1/3 + 3 2/3 = ...",
                options: ["5 3/3", "6", "5 1/3", "5 2/3", "6 1/3"],
                correct: 1
            },
            {
                question: "3/5 : 6/10 = ...",
                options: ["18/50", "30/30", "1", "5/10", "3/3"],
                correct: 2
            },
            {
                question: "Hasil dari 4/7 + 2/7 - 1/7 adalah...",
                options: ["5/7", "6/7", "4/7", "3/7", "5/14"],
                correct: 0
            },
            {
                question: "Ubah pecahan biasa 17/4 menjadi pecahan campuran!",
                options: ["4 1/4", "4 1/2", "3 3/4", "4 3/4", "3 1/4"],
                correct: 0
            },
            {
                question: "2 3/4 Ã— 2 = ...",
                options: ["4 3/4", "5 1/2", "5 3/4", "4 6/4", "5 2/4"],
                correct: 1
            },
            {
                question: "5/8 - 1/4 = ...",
                options: ["4/12", "3/8", "4/8", "2/8", "3/4"],
                correct: 1
            },
            {
                question: "3 1/5 + 2 3/5 = ...",
                options: ["5 4/5", "5 3/5", "6 4/5", "5 2/5", "6"],
                correct: 0
            },
            {
                question: "2/3 dari 15 adalah...",
                options: ["8", "9", "10", "11", "12"],
                correct: 2
            },
            {
                question: "4 2/3 - 2 1/3 = ...",
                options: ["2 1/3", "2 2/3", "2", "1 2/3", "3 1/3"],
                correct: 0
            },
            {
                question: "Hasil dari 3/4 + 1/6 adalah...",
                options: ["4/10", "9/12", "11/12", "4/12", "7/12"],
                correct: 2
            }
        ];

        // Quiz State
        let currentQuestion = 0;
        let userAnswers = new Array(questions.length).fill(null);
        let timeLeft = 600; // 10 minutes in seconds
        let timerInterval;
        let quizStarted = false;

        // Start Form Handler
        document.getElementById('startForm').addEventListener('submit', function(e) {
            e.preventDefault();
            
            const fullName = document.getElementById('fullName').value.trim();
            const examToken = document.getElementById('examToken').value;
            
            if (fullName && examToken === 'EP25T') {
                document.getElementById('participantName').textContent = fullName;
                document.getElementById('resultName').textContent = fullName;
                startQuiz();
            } else {
                // Show error message
                const errorMsg = examToken !== 'EP25T' ? 
                    '<div class="mt-4 p-3 bg-red-100 border border-red-400 text-red-700 rounded-lg"><i class="fas fa-exclamation-circle mr-2"></i>Token ujian tidak valid!</div>' :
                    '<div class="mt-4 p-3 bg-red-100 border border-red-400 text-red-700 rounded-lg"><i class="fas fa-exclamation-circle mr-2"></i>Silakan isi semua field!</div>';
                
                const existingError = document.querySelector('.error-message');
                if (existingError) existingError.remove();
                
                const errorDiv = document.createElement('div');
                errorDiv.className = 'error-message';
                errorDiv.innerHTML = errorMsg;
                document.getElementById('startForm').appendChild(errorDiv);
            }
        });

        function startQuiz() {
            document.getElementById('startScreen').classList.add('hidden');
            document.getElementById('quizScreen').classList.remove('hidden');
            quizStarted = true;
            displayQuestion();
            startTimer();
        }

        function startTimer() {
            timerInterval = setInterval(() => {
                timeLeft--;
                updateTimerDisplay();
                
                if (timeLeft <= 0) {
                    clearInterval(timerInterval);
                    finishQuiz();
                }
            }, 1000);
        }

        function updateTimerDisplay() {
            const minutes = Math.floor(timeLeft / 60);
            const seconds = timeLeft % 60;
            const display = `${minutes}:${seconds.toString().padStart(2, '0')}`;
            document.getElementById('timeDisplay').textContent = display;
            
            // Add warning class when time is low
            const timerElement = document.getElementById('timer');
            if (timeLeft <= 60) {
                timerElement.classList.add('timer-warning');
            } else {
                timerElement.classList.remove('timer-warning');
            }
        }

        function displayQuestion() {
            const question = questions[currentQuestion];
            const container = document.getElementById('questionContainer');
            
            container.innerHTML = `
                <h3 class="text-xl font-semibold text-gray-800 mb-6">
                    Soal ${currentQuestion + 1}: ${question.question}
                </h3>
                <div class="space-y-3">
                    ${question.options.map((option, index) => `
                        <div class="option-card bg-gray-50 hover:bg-gray-100 p-4 rounded-lg cursor-pointer border-2 border-transparent"
                             onclick="selectOption(${index})">
                            <label class="flex items-center cursor-pointer">
                                <input type="radio" name="answer" value="${index}" class="mr-3" 
                                       ${userAnswers[currentQuestion] === index ? 'checked' : ''}>
                                <span class="text-gray-700">${String.fromCharCode(65 + index)}. ${option}</span>
                            </label>
                        </div>
                    `).join('')}
                </div>
            `;
            
            updateProgress();
            updateNavigationButtons();
        }

        function selectOption(index) {
            userAnswers[currentQuestion] = index;
            
            // Update visual selection
            const options = document.querySelectorAll('.option-card');
            options.forEach((option, i) => {
                if (i === index) {
                    option.classList.add('selected');
                    option.querySelector('input').checked = true;
                } else {
                    option.classList.remove('selected');
                    option.querySelector('input').checked = false;
                }
            });
        }

        function updateProgress() {
            const progress = ((currentQuestion + 1) / questions.length) * 100;
            document.getElementById('progressBar').style.width = `${progress}%`;
            document.getElementById('progressText').textContent = `${currentQuestion + 1}/${questions.length}`;
        }

        function updateNavigationButtons() {
            const prevBtn = document.getElementById('prevBtn');
            const nextBtn = document.getElementById('nextBtn');
            const finishBtn = document.getElementById('finishBtn');
            
            prevBtn.disabled = currentQuestion === 0;
            
            if (currentQuestion === questions.length - 1) {
                nextBtn.classList.add('hidden');
                finishBtn.classList.remove('hidden');
            } else {
                nextBtn.classList.remove('hidden');
                finishBtn.classList.add('hidden');
            }
        }

        function previousQuestion() {
            if (currentQuestion > 0) {
                currentQuestion--;
                displayQuestion();
            }
        }

        function nextQuestion() {
            if (currentQuestion < questions.length - 1) {
                currentQuestion++;
                displayQuestion();
            }
        }

        function finishQuiz() {
            clearInterval(timerInterval);
            
            // Calculate score
            let correctAnswers = 0;
            userAnswers.forEach((answer, index) => {
                if (answer === questions[index].correct) {
                    correctAnswers++;
                }
            });
            
            const percentage = Math.round((correctAnswers / questions.length) * 100);
            
            // Show result screen
            document.getElementById('quizScreen').classList.add('hidden');
            document.getElementById('resultScreen').classList.remove('hidden');
            
            // Update result display
            document.getElementById('scoreDisplay').textContent = correctAnswers;
            document.getElementById('percentage').textContent = `${percentage}%`;
            
            // Set result icon and message based on score
            const resultIcon = document.getElementById('resultIcon');
            const resultMessage = document.getElementById('resultMessage');
            
            if (percentage >= 80) {
                resultIcon.innerHTML = '<i class="fas fa-trophy text-yellow-500 text-5xl"></i>';
                resultIcon.className = 'inline-flex items-center justify-center w-24 h-24 rounded-full mb-4 bg-yellow-100';
                resultMessage.innerHTML = '<p class="text-green-600 font-semibold">Luar Biasa! Kamu sangat menguasai materi pecahan!</p>';
            } else if (percentage >= 60) {
                resultIcon.innerHTML = '<i class="fas fa-star text-blue-500 text-5xl"></i>';
                resultIcon.className = 'inline-flex items-center justify-center w-24 h-24 rounded-full mb-4 bg-blue-100';
                resultMessage.innerHTML = '<p class="text-blue-600 font-semibold">Bagus! Kamu sudah cukup memahami pecahan.</p>';
            } else {
                resultIcon.innerHTML = '<i class="fas fa-book text-orange-500 text-5xl"></i>';
                resultIcon.className = 'inline-flex items-center justify-center w-24 h-24 rounded-full mb-4 bg-orange-100';
                resultMessage.innerHTML = '<p class="text-orange-600 font-semibold">Tetap semangat! Ayo belajar lagi untuk meningkatkan pemahamanmu.</p>';
            }
        }

        // Prevent going back during quiz
        window.addEventListener('beforeunload', function(e) {
            if (quizStarted) {
                e.preventDefault();
                e.returnValue = '';
            }
        });
    </script>
</body>
</html>