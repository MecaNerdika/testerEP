<!DOCTYPE html>
<html lang="id">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Kuis Verbal 120 Soal</title>
  <style>
    :root{
      --bg:#060000;       /* slate-900 */
      --card:#111827;     /* gray-900 */
      --muted:#334155;    /* slate-600 */
      --text:#ffffff;     /* gray-200 */
      --accent:#38bdf8;   /* sky-400 */
      --accent-2:#22c55e; /* green-500 */
      --danger:#ef4444;   /* red-500 */
      --warn:#f59e0b;     /* amber-500 */
      --shadow: 0 8px 24px rgba(0,0,0,.35);
      --radius: 16px;
    }
    *{box-sizing:border-box}
    body{
      margin:0; font-family: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, "Helvetica Neue", Arial;
      background: radial-gradient(1200px 800px at 10% -10%, #1e293b, transparent),
                  radial-gradient(800px 600px at 120% 0%, #0b3b47, transparent),
                  var(--bg);
      color:var(--text);
      min-height:100svh; display:flex; align-items:center; justify-content:center; padding:24px;
    }
    .app{width:100%; max-width:980px}
    header{
      display:flex; align-items:center; justify-content:space-between; gap:12px; margin-bottom:16px;
    }
    .brand{font-weight:800; letter-spacing:.5px; font-size:clamp(18px,3.5vw,24px)}
    .timer{font-variant-numeric:tabular-nums; font-weight:700; padding:10px 14px; border-radius:999px; background:#0b1220; border:1px solid #1f2a44; box-shadow:var(--shadow)}
    .card{background:linear-gradient(180deg,#0b1220,#0a1020); border:1px solid #1f2a44; border-radius:var(--radius); box-shadow:var(--shadow)}
    .section{display:none}
    .active{display:block}
    .card-inner{padding:20px}
    .grid{display:grid; gap:16px}
    .grid-2{grid-template-columns: 1fr 1fr}
    .grid-responsive{grid-template-columns: 1fr;}
    @media (min-width:720px){ .grid-responsive{grid-template-columns: 1fr 320px} }

    input[type="text"], input[type="password"]{
      width:100%; padding:12px 14px; border-radius:12px; border:1px solid #26314d; background:#0b1220; color:var(--text);
      outline:none; box-shadow:inset 0 0 0 9999px rgba(255,255,255,0);
    }
    label{font-size:14px; color:#cbd5e1}
    .btn{cursor:pointer; padding:12px 16px; border-radius:14px; background:var(--accent); color:#001219; border:none; font-weight:700; box-shadow:var(--shadow); transition:.2s transform ease;}
    .btn:active{transform:translateY(1px)}
    .btn.secondary{background:#1f2937; color:#e2e8f0; border:1px solid #334155}
    .btn.warn{background:var(--warn); color:#0b1220}
    .btn.danger{background:var(--danger); color:#0b1220}
    .muted{color:#94a3b8}
    .pill{display:inline-flex; align-items:center; gap:8px; padding:6px 10px; border-radius:999px; background:#0b1220; border:1px solid #223156; font-size:12px; color:#cbd5e1}

    .question-area{display:flex; flex-direction:column; gap:14px}
    .q-title{font-weight:800; font-size:18px}
    .choices{display:grid; gap:10px}
    .choice{display:flex; gap:10px; align-items:flex-start; border:1px solid #1f2a44; background:#0b1220; padding:12px; border-radius:12px; cursor:pointer}
    .choice input{margin-top:4px}

    .nav{display:flex; gap:10px; flex-wrap:wrap; max-height:240px; overflow:auto; padding:10px}
    .nav button{width:44px; height:40px; border-radius:10px; border:1px solid #1f2a44; background:#0b1220; color:#cbd5e1; font-weight:700; cursor:pointer}
    .nav button.active{outline:2px solid var(--accent); color:#0ea5e9}
    .nav button.done{background:#07291f; border-color:#0b7a53; color:#34d399}

    .footer-actions{display:flex; align-items:center; justify-content:space-between; gap:10px; margin-top:10px}

    .legend{display:flex; gap:8px; flex-wrap:wrap}

    .results{display:grid; gap:12px}
    .score-box{display:grid; grid-template-columns:1fr 1fr; gap:10px}
    .score-card{background:#0b1220; border:1px solid #1f2a44; border-radius:14px; padding:14px}

    .info-row{display:flex; gap:10px; flex-wrap:wrap; align-items:center; justify-content:space-between}
  </style>
</head>
<body>
  <div class="app">
    <header>
      <div class="brand">Kuis Verbal 120 Soal</div>
      <div class="pill" id="infoUser">Belum login</div>
      <div class="timer" id="timer">21:00</div>
    </header>

    <!-- SECTION 1: FORM MINIMAL -->
    <section id="section-form" class="section active">
      <div class="card">
        <div class="card-inner grid">
          <div>
            <h2 style="margin:0 0 10px 0">Masuk Kuis</h2>
            <p class="muted" style="margin-top:0">Masukkan nama dan password untuk memulai. Tidak ada pengaturan tambahan.</p>
            <div class="grid">
              <div>
                <label for="nama">Nama</label>
                <input id="nama" type="text" placeholder="Nama peserta" />
              </div>
              <div>
                <label for="pass">Password</label>
                <input id="pass" type="password" placeholder="Password" />
              </div>
              <button class="btn" id="btnMulai">Mulai Kuis</button>
            </div>
          </div>
        </div>
      </div>
    </section>

    <!-- SECTION 2: QUIZ -->
    <section id="section-quiz" class="section">
      <div class="grid grid-responsive">
        <div class="card">
          <div class="card-inner">
            <div class="info-row">
              <div class="pill" id="infoKategori">Kategori: -</div>
              <div class="pill" id="infoSoal">Soal 0 / 120</div>
            </div>
            <div class="question-area" id="questionArea">
              <!-- Question inject here -->
            </div>
            <div class="footer-actions">
              <button class="btn secondary" id="prevBtn">Prev</button>
              <div class="legend">
                <span class="pill">• Biru = aktif</span>
                <span class="pill" style="background:#07291f; color:#34d399; border-color:#0b7a53">• Hijau = terjawab</span>
              </div>
              <button class="btn" id="nextBtn">Next</button>
            </div>
          </div>
        </div>
        <div class="card">
          <div class="card-inner">
            <h3 style="margin-top:0">Navigasi Soal</h3>
            <div class="nav" id="nav">
              <!-- Nav buttons injected here -->
            </div>
            <div class="grid" style="margin-top:8px">
              <button class="btn warn" id="btnSubmit">Kumpulkan Jawaban</button>
              <button class="btn danger" id="btnReset">Reset Jawaban</button>
            </div>
          </div>
        </div>
      </div>
    </section>

    <!-- SECTION 3: HASIL -->
    <section id="section-result" class="section">
      <div class="card">
        <div class="card-inner results">
          <h2 style="margin:0">Hasil Ujian</h2>
          <p class="muted" id="resultUser">Peserta: -</p>
          <div class="score-box">
            <div class="score-card">
              <div class="muted">Skor Sinonim</div>
              <div id="scoreSinonim" style="font-size:28px; font-weight:800">0 / 40</div>
            </div>
            <div class="score-card">
              <div class="muted">Skor Antonim</div>
              <div id="scoreAntonim" style="font-size:28px; font-weight:800">0 / 40</div>
            </div>
            <div class="score-card">
              <div class="muted">Skor Hiponim</div>
              <div id="scoreHiponim" style="font-size:28px; font-weight:800">0 / 40</div>
            </div>
            <div class="score-card" style="grid-column: span 2">
              <div class="muted">Total Skor</div>
              <div id="scoreTotal" style="font-size:30px; font-weight:900">0 / 120</div>
            </div>
          </div>
          <div>
            <button class="btn" id="btnUlang">Mulai Lagi</button>
          </div>
        </div>
      </div>
    </section>
  </div>

  <script>
    /** UTIL **/
    const el = (sel) => document.querySelector(sel);
    const els = (sel) => Array.from(document.querySelectorAll(sel));
    const shuffle = (arr) => arr.map(v=>[Math.random(),v]).sort((a,b)=>a[0]-b[0]).map(x=>x[1]);

    /** BANK SOAL (40/40/40) **/
    // Format: {type:'sinonim'|'antonim'|'hiponim', q:'', options:['','','',''], answer: index}

    const SINONIM = [
      {q:'Sinonim kata "absah" adalah …',o:['batal','sah','surut','palsu'],a:1},
      {q:'Sinonim "akurat" adalah …',o:['teliti','acak','rapuh','seadanya'],a:0},
      {q:'Sinonim "ambigu" adalah …',o:['jelas','rancu','pasti','nyata'],a:1},
      {q:'Sinonim "apatis" adalah …',o:['acuh tak acuh','bersemangat','aktif','gelisah'],a:0},
      {q:'Sinonim "arogan" adalah …',o:['rendah hati','sombong','biasa','hemat'],a:1},
      {q:'Sinonim "autentik" adalah …',o:['asli','tiruan','biasa','sementara'],a:0},
      {q:'Sinonim "bengis" adalah …',o:['kejam','ramah','lembut','ceria'],a:0},
      {q:'Sinonim "benderang" adalah …',o:['gelap','suram','terang','muram'],a:2},
      {q:'Sinonim "canggih" adalah …',o:['kuno','sederhana','mutakhir','biasa'],a:2},
      {q:'Sinonim "cedera" adalah …',o:['luka','sehat','pulih','kuat'],a:0},
      {q:'Sinonim "delegasi" adalah …',o:['utusan','musuh','penjaga','pelayan'],a:0},
      {q:'Sinonim "dominasi" adalah …',o:['kekuasaan','keterbatasan','kebetulan','ketidakpastian'],a:0},
      {q:'Sinonim "durja" adalah …',o:['murka','senang','tenang','ria'],a:0},
      {q:'Sinonim "efisien" adalah …',o:['boros','hemat','lambat','rugi'],a:1},
      {q:'Sinonim "egaliter" adalah …',o:['setara','bertingkat','kasta','hirarkis'],a:0},
      {q:'Sinonim "elok" adalah …',o:['cantik','jelek','biasa','kelam'],a:0},
      {q:'Sinonim "fatal" adalah …',o:['sepele','parah','ringan','remeh'],a:1},
      {q:'Sinonim "gamblang" adalah …',o:['kabur','jelas','samar','redup'],a:1},
      {q:'Sinonim "gigih" adalah …',o:['pantang menyerah','malas','lesu','lalai'],a:0},
      {q:'Sinonim "harmonis" adalah …',o:['selaras','kontras','kaku','tajam'],a:0},
      {q:'Sinonim "hulu" adalah …',o:['muara','pangkal','ujung','akhir'],a:1},
      {q:'Sinonim "imanen" adalah …',o:['melekat','terpisah','terlepas','teralienasi'],a:0},
      {q:'Sinonim "inklusif" adalah …',o:['terbuka','eksklusif','sempit','kaku'],a:0},
      {q:'Sinonim "intuitif" adalah …',o:['naluriah','rasional murni','mekanis','acak'],a:0},
      {q:'Sinonim "konkret" adalah …',o:['abstrak','nyata','maya','semu'],a:1},
      {q:'Sinonim "kredibel" adalah …',o:['dapat dipercaya','meragukan','palsu','sumir'],a:0},
      {q:'Sinonim "lazim" adalah …',o:['umum','langka','baru','aneh'],a:0},
      {q:'Sinonim "legawa" adalah …',o:['ikhlas','marah','benci','sakit'],a:0},
      {q:'Sinonim "limbung" adalah …',o:['goyah','kokoh','tegar','mantap'],a:0},
      {q:'Sinonim "mahir" adalah …',o:['ahli','pemula','amatir','biasa'],a:0},
      {q:'Sinonim "makmur" adalah …',o:['sejahtera','miskin','melarat','sulit'],a:0},
      {q:'Sinonim "mutakhir" adalah …',o:['usang','terkini','kadaluwarsa','jadul'],a:1},
      {q:'Sinonim "nevralgis" (figuratif) adalah …',o:['krusial','remeh','pinggiran','acuh'],a:0},
      {q:'Sinonim "otonom" adalah …',o:['mandiri','bergantung','serba-tergantung','nonaktif'],a:0},
      {q:'Sinonim "paripurna" adalah …',o:['sempurna','cacat','rusak','gagal'],a:0},
      {q:'Sinonim "resiprokal" adalah …',o:['timbal balik','searah','tunggal','acak'],a:0},
      {q:'Sinonim "riuh" adalah …',o:['gaduh','hening','sunyi','sepi'],a:0},
      {q:'Sinonim "sanggup" adalah …',o:['mampu','tidak bisa','enggan','lelah'],a:0},
      {q:'Sinonim "sekilas" adalah …',o:['sepintas','mendalam','lama','teliti'],a:0},
      {q:'Sinonim "teladan" adalah …',o:['panutan','cacian','celaan','hukuman'],a:0},
    ].map(x=>({type:'sinonim', q:x.q, options:x.o, answer:x.a}));

    const ANTONIM = [
      {q:'Antonim "abadi" adalah …',o:['kekal','sementara','tetap','langgeng'],a:1},
      {q:'Antonim "aktif" adalah …',o:['giat','sibuk','pasif','lincah'],a:2},
      {q:'Antonim "aman" adalah …',o:['berbahaya','terlindung','tertutup','amanah'],a:0},
      {q:'Antonim "aneka" adalah …',o:['beragam','majemuk','seragam','berwarna'],a:2},
      {q:'Antonim "arif" adalah …',o:['bijak','cerdik','bodoh','pandai'],a:2},
      {q:'Antonim "bangkit" adalah …',o:['berdiri','terjaga','jatuh','naik'],a:2},
      {q:'Antonim "bongkar" adalah …',o:['urai','pasang','urai ulang','cabut'],a:1},
      {q:'Antonim "danau" (pilih yang paling berlawanan) adalah …',o:['sungai','kolam','lautan','rawa'],a:2},
      {q:'Antonim "dermawan" adalah …',o:['kikir','murah hati','royal','pemurah'],a:0},
      {q:'Antonim "ekspansi" adalah …',o:['penyusutan','perluasan','peningkatan','pembukaan'],a:0},
      {q:'Antonim "eksplisit" adalah …',o:['jelas','terang','implisit','tegas'],a:2},
      {q:'Antonim "elastis" adalah …',o:['lentur','kaku','luwes','lembut'],a:1},
      {q:'Antonim "fasih" adalah …',o:['lancar','gagap','petah','mahir'],a:1},
      {q:'Antonim "gagal" adalah …',o:['sukses','runtuh','batal','luruh'],a:0},
      {q:'Antonim "halus" adalah …',o:['lembut','kasar','tipis','rapi'],a:1},
      {q:'Antonim "hemat" adalah …',o:['cermat','boros','irit','efisien'],a:1},
      {q:'Antonim "hipotesis" adalah …',o:['dugaan','teori mapan','praduga','andaian'],a:1},
      {q:'Antonim "impor" adalah …',o:['ekspor','antre','retur','barter'],a:0},
      {q:'Antonim "inklusif" adalah …',o:['terbuka','eksklusif','umum','global'],a:1},
      {q:'Antonim "intens" adalah …',o:['renggang','berat','padat','serius'],a:0},
      {q:'Antonim "jenuh" adalah …',o:['lelah','segar','penuh','padat'],a:1},
      {q:'Antonim "ketat" adalah …',o:['longgar','keras','erat','rapat'],a:0},
      {q:'Antonim "kudus" adalah …',o:['suci','najis','bersih','harum'],a:1},
      {q:'Antonim "lembap" adalah …',o:['basah','kering','becek','licin'],a:1},
      {q:'Antonim "maju" adalah …',o:['mundur','melaju','mahir','bergerak'],a:0},
      {q:'Antonim "malas" adalah …',o:['aktif','rajin','giat','cekatan'],a:1},
      {q:'Antonim "makmur" adalah …',o:['sejahtera','miskin','berlimpah','cukup'],a:1},
      {q:'Antonim "manis" (rasa) adalah …',o:['pahit','gurih','asin','asam'],a:0},
      {q:'Antonim "optimis" adalah …',o:['pasti','ragu','pesimis','yakin'],a:2},
      {q:'Antonim "pendek" adalah …',o:['kurang','tinggi','sempit','kecil'],a:1},
      {q:'Antonim "permanen" adalah …',o:['sementara','tetap','kekal','ajek'],a:0},
      {q:'Antonim "ramah" adalah …',o:['hangat','akrab','jutek','ceria'],a:2},
      {q:'Antonim "rapi" adalah …',o:['kusut','teratur','bersih','bersinar'],a:0},
      {q:'Antonim "rigid" adalah …',o:['kaku','lentur','keras','teguh'],a:1},
      {q:'Antonim "sederhana" adalah …',o:['wah','megah','mewah','glamor'],a:2},
      {q:'Antonim "tajam" adalah …',o:['tumpul','runcing','tajuk','pucuk'],a:0},
      {q:'Antonim "tebal" adalah …',o:['padat','tipis','rapat','pekat'],a:1},
      {q:'Antonim "terang" adalah …',o:['jelas','terbuka','gelap','gamblang'],a:2},
      {q:'Antonim "unggul" adalah …',o:['utama','biasa','adil','setara'],a:1},
      {q:'Antonim "valid" adalah …',o:['absah','batal','resmi','tepat'],a:1},
    ].map(x=>({type:'antonim', q:x.q, options:x.o, answer:x.a}));

    const HIPONIM = [
      {q:'Manakah hiponim dari "buah"?',o:['meja','apel','kursi','atap'],a:1},
      {q:'Manakah hiponim dari "burung"?',o:['elang','ikan','kucing','ular'],a:0},
      {q:'Manakah hiponim dari "sayuran"?',o:['bayam','sapu','batu','baju'],a:0},
      {q:'Manakah hiponim dari "kendaraan"?',o:['paku','sepeda','bantal','gelas'],a:1},
      {q:'Manakah hiponim dari "pekerjaan"?',o:['dokter','meja','pintu','bambu'],a:0},
      {q:'Manakah hiponim dari "perabot"?',o:['sofa','ikan','pohon','awan'],a:0},
      {q:'Manakah hiponim dari "bunga"?',o:['melati','batu','sungai','kayu'],a:0},
      {q:'Manakah hiponim dari "pakaian"?',o:['kemeja','kamera','sepatu roda','obeng'],a:0},
      {q:'Manakah hiponim dari "alat musik"?',o:['gitar','buku','lampu','jawaban'],a:0},
      {q:'Manakah hiponim dari "minuman"?',o:['air','kursi','pagar','kapur'],a:0},
      {q:'Manakah hiponim dari "bahan bakar"?',o:['bensin','air sungai','tanah liat','kapur'],a:0},
      {q:'Manakah hiponim dari "bencana"?',o:['banjir','pelangi','gerhana','fajar'],a:0},
      {q:'Manakah hiponim dari "profesi"?',o:['arsitek','lapangan','bendera','tembok'],a:0},
      {q:'Manakah hiponim dari "ikan"?',o:['salmon','elang','kupu-kupu','kakatua'],a:0},
      {q:'Manakah hiponim dari "pohon"?',o:['jati','kelereng','bola','batu'],a:0},
      {q:'Manakah hiponim dari "serangga"?',o:['belalang','cacing pita','katak','keong'],a:0},
      {q:'Manakah hiponim dari "alat tulis"?',o:['pensil','pisau','palu','piring'],a:0},
      {q:'Manakah hiponim dari "alat dapur"?',o:['wajan','obeng','bor','tangga'],a:0},
      {q:'Manakah hiponim dari "bangunan"?',o:['rumah','buku','sepeda','tikar'],a:0},
      {q:'Manakah hiponim dari "alat elektronik"?',o:['televisi','kompor arang','ember','batu'],a:0},
      {q:'Manakah hiponim dari "reptil"?',o:['buaya','elang','kelinci','sapi'],a:0},
      {q:'Manakah hiponim dari "alat transportasi air"?',o:['kapal','mobil','kereta','pesawat'],a:0},
      {q:'Manakah hiponim dari "buah sitrus"?',o:['jeruk','apel','pisang','pepaya'],a:0},
      {q:'Manakah hiponim dari "cita rasa"?',o:['asin','meja','kursi','buku'],a:0},
      {q:'Manakah hiponim dari "bahan tekstil"?',o:['katun','tepung','batu kali','kaca'],a:0},
      {q:'Manakah hiponim dari "alat komunikasi"?',o:['telepon','gagang pintu','sapu','ember'],a:0},
      {q:'Manakah hiponim dari "perangkat lunak"?',o:['peramban (browser)','kunci inggris','gembok','kayu'],a:0},
      {q:'Manakah hiponim dari "unsur kimia"?',o:['oksigen','air','garam','asam'],a:0},
      {q:'Manakah hiponim dari "olahraga beregu"?',o:['sepak bola','catur','lari 100 m','loncat jauh'],a:0},
      {q:'Manakah hiponim dari "alat ukur waktu"?',o:['jam','meteran','termometer','timbangan'],a:0},
      {q:'Manakah hiponim dari "mata uang"?',o:['rupiah','meter','liter','gram'],a:0},
      {q:'Manakah hiponim dari "rempah"?',o:['kayu manis','kerikil','tanah','air'],a:0},
      {q:'Manakah hiponim dari "awan" (jenis awan)?',o:['kumulo-nimbus','pelangi','kabut asap','embun'],a:0},
      {q:'Manakah hiponim dari "bahan bangunan"?',o:['semen','apel','air laut','kardus basah'],a:0},
      {q:'Manakah hiponim dari "pekerjaan di bidang kesehatan"?',o:['perawat','pilot','arsitek','petani'],a:0},
      {q:'Manakah hiponim dari "perangkat keras komputer"?',o:['kartu grafis','editor teks','bahasa pemrograman','algoritme'],a:0},
      {q:'Manakah hiponim dari "alat pembayaran digital"?',o:['dompet elektronik','ember plastik','mesin bor','kantong kain'],a:0},
      {q:'Manakah hiponim dari "hewan mamalia"?',o:['kuda','kura-kura','ikan mas','katak'],a:0},
      {q:'Manakah hiponim dari "bahan minuman panas"?',o:['kopi','es batu','salju','sirup beku'],a:0},
      {q:'Manakah hiponim dari "perabot kamar"?',o:['lemari','motor','sepedah (typo)','perempatan'],a:0},
    ].map(x=>({type:'hiponim', q:x.q, options:x.o, answer:x.a}));

    // Validasi jumlah
    if(SINONIM.length!==40||ANTONIM.length!==40||HIPONIM.length!==40){
      console.warn('Jumlah soal tidak 40/40/40:', SINONIM.length, ANTONIM.length, HIPONIM.length);
    }

    // Gabung & acak
    let QUESTIONS = [...SINONIM, ...ANTONIM, ...HIPONIM].map((q,i)=>({id:i+1, ...q}));

    // State
    let state = {
      user:null,
      timeLeft: 21*60, // 21 menit
      currentIndex: 0,
      answers: Array(120).fill(null), // simpan index jawaban (0..3) atau null
    };

    /** RENDERING **/
    function formatTime(s){
      const m = Math.floor(s/60).toString().padStart(2,'0');
      const r = (s%60).toString().padStart(2,'0');
      return `${m}:${r}`;
    }

    function renderTimer(){
      el('#timer').textContent = formatTime(state.timeLeft);
      if(state.timeLeft <= 60){ el('#timer').style.background = '#331a1a'; el('#timer').style.borderColor = '#7f1d1d'; }
      if(state.timeLeft <= 0){
        submitQuiz();
      }
    }

    let tick = null;
    function startTimer(){
      if(tick) clearInterval(tick);
      tick = setInterval(()=>{ state.timeLeft--; renderTimer(); if(state.timeLeft<=0) clearInterval(tick); }, 1000);
    }

    function mountNav(){
      const nav = el('#nav');
      nav.innerHTML = '';
      QUESTIONS.forEach((q,idx)=>{
        const b = document.createElement('button');
        b.textContent = idx+1;
        b.addEventListener('click', ()=>{ goTo(idx); });
        nav.appendChild(b);
      });
      updateNavActive();
    }

    function updateNavActive(){
      const buttons = els('#nav button');
      buttons.forEach((b,idx)=>{
        b.classList.toggle('active', idx===state.currentIndex);
        b.classList.toggle('done', state.answers[idx]!==null);
      });
      el('#infoSoal').textContent = `Soal ${state.currentIndex+1} / ${QUESTIONS.length}`;
      el('#infoKategori').textContent = `Kategori: ${QUESTIONS[state.currentIndex].type.toUpperCase()}`;
    }

    function renderQuestion(){
      const q = QUESTIONS[state.currentIndex];
      const container = el('#questionArea');
      container.innerHTML = '';
      const title = document.createElement('div');
      title.className = 'q-title';
      title.textContent = q.q;
      container.appendChild(title);

      const list = document.createElement('div');
      list.className = 'choices';
      q.options.forEach((opt, i)=>{
        const row = document.createElement('label');
        row.className = 'choice';
        const input = document.createElement('input');
        input.type = 'radio'; input.name = 'choice'; input.value = i;
        input.checked = state.answers[state.currentIndex]===i;
        input.addEventListener('change', ()=>{
          state.answers[state.currentIndex]=i;
          updateNavActive();
        });
        const span = document.createElement('div');
        span.textContent = opt;
        row.appendChild(input); row.appendChild(span); list.appendChild(row);
      });
      container.appendChild(list);
    }

    function goTo(idx){
      state.currentIndex = Math.max(0, Math.min(QUESTIONS.length-1, idx));
      updateNavActive();
      renderQuestion();
    }

    function next(){ if(state.currentIndex < QUESTIONS.length-1){ goTo(state.currentIndex+1); } }
    function prev(){ if(state.currentIndex > 0){ goTo(state.currentIndex-1); } }

    function resetAnswers(){
      if(!confirm('Yakin reset semua jawaban?')) return;
      state.answers = Array(QUESTIONS.length).fill(null);
      updateNavActive();
      renderQuestion();
    }

    function submitQuiz(){
      // hitung skor per kategori
      let sSin=0, sAnt=0, sHip=0;
      QUESTIONS.forEach((q,idx)=>{
        const pick = state.answers[idx];
        const correct = q.answer;
        if(pick===correct){
          if(q.type==='sinonim') sSin++;
          else if(q.type==='antonim') sAnt++;
          else if(q.type==='hiponim') sHip++;
        }
      });
      const total = sSin + sAnt + sHip;

      // tampilkan
      el('#scoreSinonim').textContent = `${sSin} / 40`;
      el('#scoreAntonim').textContent = `${sAnt} / 40`;
      el('#scoreHiponim').textContent = `${sHip} / 40`;
      el('#scoreTotal').textContent = `${total} / 120`;
      el('#resultUser').textContent = `Peserta: ${state.user?.nama || '-'} (waktu habis/kumpul)`;

      // stop timer, ganti section
      if(tick) clearInterval(tick);
      showSection('result');
      window.scrollTo({top:0, behavior:'smooth'});
    }

    function showSection(which){
      el('#section-form').classList.remove('active');
      el('#section-quiz').classList.remove('active');
      el('#section-result').classList.remove('active');
      if(which==='form') el('#section-form').classList.add('active');
      if(which==='quiz') el('#section-quiz').classList.add('active');
      if(which==='result') el('#section-result').classList.add('active');
    }

    // EVENTS
    el('#btnMulai').addEventListener('click', ()=>{
      const nama = el('#nama').value.trim();
      const pass = el('#pass').value.trim();
      if(!nama || !pass){ alert('Nama dan password wajib diisi.'); return; }
      if(pass!=="psikedinasan"){
        alert("password salah! tanya password ke sir hardi. klo sir hardi dak tau tanya ke sir meca");
        return;
      }
      state.user = {nama, pass};
      el('#infoUser').textContent = `Peserta: ${nama}`;
      showSection('quiz');
      startTimer();
      mountNav();
      goTo(0);
      renderTimer();
    });

    el('#prevBtn').addEventListener('click', prev);
    el('#nextBtn').addEventListener('click', next);
    el('#btnReset').addEventListener('click', resetAnswers);
    el('#btnSubmit').addEventListener('click', ()=>{
      if(confirm('Kumpulkan jawaban sekarang?')) submitQuiz();
    });

    // Keyboard nav: panah kiri/kanan, angka 1-4 untuk memilih A-D
    window.addEventListener('keydown', (e)=>{
      if(!el('#section-quiz').classList.contains('active')) return;
      if(e.key==='ArrowRight') next();
      if(e.key==='ArrowLeft') prev();
      if(['1','2','3','4'].includes(e.key)){
        const idx = parseInt(e.key)-1;
        state.answers[state.currentIndex]=idx;
        updateNavActive();
        renderQuestion();
      }
    });

    // Ulang dari hasil
    el('#btnUlang').addEventListener('click', ()=>{
      state = { user: state.user, timeLeft: 21*60, currentIndex: 0, answers: Array(120).fill(null)};
      QUESTIONS = shuffle(QUESTIONS); // acak ulang urutan
      showSection('quiz');
      startTimer();
      mountNav();
      goTo(0);
      renderTimer();
    });

  </script>
</body>
</html>
