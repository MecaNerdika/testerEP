<!DOCTYPE html>
<html lang="id">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Kuis Satuan Sederhana Part 2</title>
  <style>
    :root{
      --bg:#060000;       /* slate-900 */
      --card:#111827;     /* gray-900 */
      --muted:#334155;    /* slate-600 */
      --text:#ffffff;     /* gray-200 */
      --accent:#38bdf8;   /* sky-400 */
      --accent-2:#22c55e; /* green-500 */
      --danger:#ef4444;   /* red-500 */
      --warn:#f59e0b;     /* amber-500 */
      --shadow: 0 8px 24px rgba(0,0,0,.35);
      --radius: 16px;
    }
    *{box-sizing:border-box}
    body{
      margin:0; font-family: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, "Helvetica Neue", Arial;
      background: radial-gradient(1200px 800px at 10% -10%, #1e293b, transparent),
                  radial-gradient(800px 600px at 120% 0%, #0b3b47, transparent),
                  var(--bg);
      color:var(--text);
      min-height:100svh; display:flex; align-items:center; justify-content:center; padding:24px;
    }
    .app{width:100%; max-width:980px}
    header{
      display:flex; align-items:center; justify-content:space-between; gap:12px; margin-bottom:16px;
    }
    .brand{font-weight:800; letter-spacing:.5px; font-size:clamp(18px,3.5vw,24px)}
    .timer{font-variant-numeric:tabular-nums; font-weight:700; padding:10px 14px; border-radius:999px; background:#0b1220; border:1px solid #1f2a44; box-shadow:var(--shadow)}
    .card{background:linear-gradient(180deg,#0b1220,#0a1020); border:1px solid #1f2a44; border-radius:var(--radius); box-shadow:var(--shadow)}
    .section{display:none}
    .active{display:block}
    .card-inner{padding:20px}
    .grid{display:grid; gap:16px}
    .grid-2{grid-template-columns: 1fr 1fr}
    .grid-responsive{grid-template-columns: 1fr;}
    @media (min-width:720px){ .grid-responsive{grid-template-columns: 1fr 320px} }

    input[type="text"], input[type="password"]{
      width:100%; padding:12px 14px; border-radius:12px; border:1px solid #26314d; background:#0b1220; color:var(--text);
      outline:none; box-shadow:inset 0 0 0 9999px rgba(255,255,255,0);
    }
    label{font-size:14px; color:#cbd5e1}
    .btn{cursor:pointer; padding:12px 16px; border-radius:14px; background:var(--accent); color:#001219; border:none; font-weight:700; box-shadow:var(--shadow); transition:.2s transform ease;}
    .btn:active{transform:translateY(1px)}
    .btn.secondary{background:#1f2937; color:#e2e8f0; border:1px solid #334155}
    .btn.warn{background:var(--warn); color:#0b1220}
    .btn.danger{background:var(--danger); color:#0b1220}
    .muted{color:#94a3b8}
    .pill{display:inline-flex; align-items:center; gap:8px; padding:6px 10px; border-radius:999px; background:#0b1220; border:1px solid #223156; font-size:12px; color:#cbd5e1}

    .question-area{display:flex; flex-direction:column; gap:14px}
    .q-title{font-weight:800; font-size:18px}
    .choices{display:grid; gap:10px}
    .choice{display:flex; gap:10px; align-items:flex-start; border:1px solid #1f2a44; background:#0b1220; padding:12px; border-radius:12px; cursor:pointer}
    .choice input{margin-top:4px}

    .nav{display:flex; gap:10px; flex-wrap:wrap; max-height:240px; overflow:auto; padding:10px}
    .nav button{width:44px; height:40px; border-radius:10px; border:1px solid #1f2a44; background:#0b1220; color:#cbd5e1; font-weight:700; cursor:pointer}
    .nav button.active{outline:2px solid var(--accent); color:#0ea5e9}
    .nav button.done{background:#07291f; border-color:#0b7a53; color:#34d399}

    .footer-actions{display:flex; align-items:center; justify-content:space-between; gap:10px; margin-top:10px}

    .legend{display:flex; gap:8px; flex-wrap:wrap}

    .results{display:grid; gap:12px}
    .score-box{display:grid; grid-template-columns:1fr 1fr; gap:10px}
    .score-card{background:#0b1220; border:1px solid #1f2a44; border-radius:14px; padding:14px}

    .info-row{display:flex; gap:10px; flex-wrap:wrap; align-items:center; justify-content:space-between}
  </style>
</head>
<body>
  <div class="app">
    <header>
      <div class="brand">Kuis satuan sederhana</div>
      <div class="pill" id="infoUser">Belum login</div>
      <div class="timer" id="timer">21:00</div>
    </header>

    <!-- SECTION 1: FORM MINIMAL -->
    <section id="section-form" class="section active">
      <div class="card">
        <div class="card-inner grid">
          <div>
            <h2 style="margin:0 0 10px 0">Masuk Kuis</h2>
            <p class="muted" style="margin-top:0">Masukkan nama dan password untuk memulai. Tidak ada pengaturan tambahan.</p>
            <div class="grid">
              <div>
                <label for="nama">Nama</label>
                <input id="nama" type="text" placeholder="Nama peserta" />
              </div>
              <div>
                <label for="pass">Password</label>
                <input id="pass" type="password" placeholder="Password" />
              </div>
              <button class="btn" id="btnMulai">Mulai Kuis</button>
            </div>
          </div>
        </div>
      </div>
    </section>

    <!-- SECTION 2: QUIZ -->
    <section id="section-quiz" class="section">
      <div class="grid grid-responsive">
        <div class="card">
          <div class="card-inner">
            <div class="info-row">
              <div class="pill" id="infoKategori">Kategori: -</div>
              <div class="pill" id="infoSoal">Soal 0 / 180</div>
            </div>
            <div class="question-area" id="questionArea">
              <!-- Question inject here -->
            </div>
            <div class="footer-actions">
              <button class="btn secondary" id="prevBtn">Prev</button>
              <div class="legend">
                <span class="pill">• Biru = aktif</span>
                <span class="pill" style="background:#07291f; color:#34d399; border-color:#0b7a53">• Hijau = terjawab</span>
              </div>
              <button class="btn" id="nextBtn">Next</button>
            </div>
          </div>
        </div>
        <div class="card">
          <div class="card-inner">
            <h3 style="margin-top:0">Navigasi Soal</h3>
            <div class="nav" id="nav">
              <!-- Nav buttons injected here -->
            </div>
            <div class="grid" style="margin-top:8px">
              <button class="btn warn" id="btnSubmit">Kumpulkan Jawaban</button>
              <button class="btn danger" id="btnReset">Reset Jawaban</button>
            </div>
          </div>
        </div>
      </div>
    </section>

    <!-- SECTION 3: HASIL -->
    <section id="section-result" class="section">
      <div class="card">
        <div class="card-inner results">
          <h2 style="margin:0">Hasil Ujian</h2>
          <p class="muted" id="resultUser">Peserta: -</p>
          <div class="score-box">
            <div class="score-card" style="grid-column: span 2">
              <div class="muted">Total Skor</div>
              <div id="scoreTotal" style="font-size:30px; font-weight:900">0 / 180</div>
            </div>
          </div>
          <div>
            <button class="btn" id="btnUlang">Mulai Lagi</button>
          </div>
        </div>
      </div>
    </section>
  </div>

  <script>
    /** UTIL **/
    const el = (sel) => document.querySelector(sel);
    const els = (sel) => Array.from(document.querySelectorAll(sel));
    const shuffle = (arr) => arr.map(v=>[Math.random(),v]).sort((a,b)=>a[0]-b[0]).map(x=>x[1]);

    /** BANK SOAL (40/40/40) **/
    // Format: {type:'sinonim'|'antonim'|'hiponim', q:'', options:['','','',''], answer: index}

    const SOAL_SATUAN = [
  {
    "q": "Sebuah toko kelontong menerima kiriman 5 kodi sabun batangan. Jika setiap sabun beratnya 150 gram, dan sabun tersebut harus dikemas ulang ke dalam paket-paket kecil seberat 6 ons, berapa total paket kecil yang dapat dibuat dari seluruh sabun tersebut?",
    "o": [
      "100 paket",
      "250 paket",
      "50 paket",
      "25 paket"
    ],
    "a": 3
  },
  {
    "q": "Seorang pelari berlatih dengan rute sejauh 5 km. Ia berhasil menyelesaikan rute tersebut dalam 30 menit. Jika ia meningkatkan kecepatan sehingga bisa menempuh jarak tersebut dalam 1.800 detik, berapa rata-rata waktu yang ia hemat dalam setiap kilometer?",
    "o": [
      "60 detik",
      "120 detik",
      "360 detik",
      "0 detik"
    ],
    "a": 3
  },
  {
    "q": "Sebuah mobil tangki mengangkut 800 liter bensin. Bensin tersebut akan diisi ke dalam jerigen berukuran 20.000 ml. Jika pengisian dilakukan dengan kecepatan 25 ml per detik, berapa lama waktu yang dibutuhkan untuk mengisi satu jerigen hingga penuh?",
    "o": [
      "800 detik",
      "16.000 detik",
      "800 detik",
      "8000 detik"
    ],
    "a": 2
  },
  {
    "q": "Sebuah pabrik memproduksi 1 gross pensil setiap minggu. Jika pensil-pensil tersebut dikemas ke dalam kotak-kotak kecil, di mana setiap kotak berisi 6 buah pensil, berapa banyak kotak yang diproduksi pabrik dalam satu bulan (asumsi 1 bulan = 4 minggu)?",
    "o": [
      "24 kotak",
      "48 kotak",
      "96 kotak",
      "576 kotak"
    ],
    "a": 2
  },
  {
    "q": "Sebuah truk mengangkut 4.500 kg beras. Beras tersebut akan didistribusikan ke 9 buah toko, dan setiap toko mendapat bagian yang sama. Jika setiap toko harus mengemas berasnya ke dalam kantong-kantong berukuran 50 ons, berapa banyak kantong beras yang harus disiapkan oleh setiap toko?",
    "o": [
      "10 kantong",
      "100 kantong",
      "1.000 kantong",
      "1.000 kantong"
    ],
    "a": 1
  },
  {
    "q": "Sebuah proyek pembangunan jalan sepanjang 15 hm, 50 dam, dan 20 m. Jika proyek tersebut dimulai pada 1 Januari 2025 dan membutuhkan waktu 30 hari untuk selesai, pada tanggal berapa proyek tersebut selesai?",
    "o": [
      "30 Januari 2025",
      "31 Januari 2025",
      "31 Januari 2025",
      "30 Januari 2025"
    ],
    "a": 1
  },
  {
    "q": "Dalam sebuah pesta, ada 6 lusin gelas. Masing-masing gelas diisi dengan 250 ml jus jeruk. Berapa total volume jus jeruk dalam liter yang dibutuhkan untuk mengisi semua gelas?",
    "o": [
      "18 liter",
      "15 liter",
      "12 liter",
      "24 liter"
    ],
    "a": 0
  },
  {
    "q": "Seorang pedagang membeli 5 kodi pakaian dengan harga Rp 1.000.000 per kodi. Jika ia berhasil menjual semua pakaian tersebut dengan keuntungan total Rp 2.500.000, berapa harga jual rata-rata per potong pakaian?",
    "o": [
      "Rp 75.000",
      "Rp 100.000",
      "Rp 50.000",
      "Rp 125.000"
    ],
    "a": 0
  },
  {
    "q": "Sebuah pipa air memiliki debit 2 liter per menit. Jika pipa tersebut digunakan untuk mengisi sebuah tangki berkapasitas 12.000 ml, berapa lama waktu yang dibutuhkan dalam jam untuk mengisi tangki hingga penuh?",
    "o": [
      "1 jam",
      "0.1 jam",
      "0.2 jam",
      "10 jam"
    ],
    "a": 1
  },
  {
    "q": "Sebuah konveksi dapat menjahit 120 potong kemeja dalam 3 hari. Jika konveksi tersebut mendapatkan pesanan sebanyak 5 kodi kemeja, berapa lama waktu yang dibutuhkan untuk menyelesaikan pesanan tersebut?",
    "o": [
      "2 hari",
      "2,5 hari",
      "3 hari",
      "4 hari"
    ],
    "a": 1
  },
  {
    "q": "Perjalanan dari kota A ke kota B yang berjarak 180 km ditempuh dengan mobil selama 3 jam. Jika jarak tempuh tersebut ingin dipersingkat menjadi 2 jam, berapa kecepatan rata-rata mobil yang harus ditingkatkan?",
    "o": [
      "20 km/jam",
      "30 km/jam",
      "45 km/jam",
      "50 km/jam"
    ],
    "a": 1
  },
  {
    "q": "Sebuah supermarket membeli 10 gros mangkok. Setelah diperiksa, terdapat 15 lusin mangkok yang pecah. Berapa persentase mangkok yang pecah dari total pembelian?",
    "o": [
      "10%",
      "12.5%",
      "15%",
      "20%"
    ],
    "a": 1
  },
  {
    "q": "Seorang kakek berumur 80 tahun. Berapa windu lagi kakek tersebut akan mencapai umur 1 abad?",
    "o": [
      "2 windu",
      "2,5 windu",
      "3 windu",
      "20 windu"
    ],
    "a": 1
  },
  {
    "q": "Jarak rumah Beni ke sekolah adalah 2 km. Jika Beni sudah berjalan sejauh 500 m, berapa dam lagi sisa jarak yang harus ditempuh Beni?",
    "o": [
      "15 dam",
      "150 dam",
      "200 dam",
      "1.500 dam"
    ],
    "a": 1
  },
  {
    "q": "Sebuah pabrik memproduksi 10 ton gula setiap bulan. Gula tersebut dikemas ke dalam karung-karung berukuran 20 kg. Jika setiap minggu pabrik tersebut harus mengirimkan 20 kodi karung gula ke distributor, berapa banyak karung gula yang tersisa di pabrik setiap bulannya?",
    "o": [
      "100 karung",
      "100 karung",
      "200 karung",
      "300 karung"
    ],
    "a": 0
  },
  {
    "q": "Sebuah botol berisi 1.500 ml air. Jika air tersebut diisi ke dalam gelas-gelas kecil berukuran 50 gram, berapa banyak gelas yang bisa diisi hingga penuh? (Asumsi massa jenis air adalah 1 gram/ml)",
    "o": [
      "3 gelas",
      "15 gelas",
      "30 gelas",
      "300 gelas"
    ],
    "a": 2
  },
  {
    "q": "Sebuah perjalanan dari kota A ke kota B berjarak 12 km. Rute tersebut terdiri dari 40 hm jalan lurus dan sisanya adalah jalan berbelok-belok. Berapa dam jarak yang harus ditempuh pada jalan yang berbelok-belok?",
    "o": [
      "80 dam",
      "800 dam",
      "1.200 dam",
      "400 dam"
    ],
    "a": 1
  },
  {
    "q": "Sebuah mobil memerlukan waktu 300 menit untuk menempuh perjalanan. Jika mobil tersebut berangkat pukul 08.00 pagi, pukul berapa mobil tersebut akan tiba di tujuan?",
    "o": [
      "Pukul 12.00 siang",
      "Pukul 13.00 siang",
      "Pukul 12.30 siang",
      "Pukul 14.00 siang"
    ],
    "a": 1
  },
  {
    "q": "Sebuah tangki air memiliki volume 500 liter. Tangki tersebut bocor dengan kecepatan 250 ml per jam. Jika tidak ada penambahan air, berapa hari yang dibutuhkan agar tangki tersebut kosong?",
    "o": [
      "1 hari",
      "100 hari",
      "83,33 hari",
      "80 hari"
    ],
    "a": 2
  },
  {
    "q": "Sebuah perpustakaan baru dibuka 5 abad yang lalu. Jika sekarang tahun 2025, pada tahun berapakah perpustakaan tersebut didirikan?",
    "o": [
      "Tahun 1525",
      "Tahun 1825",
      "Tahun 1925",
      "Tahun 2525"
    ],
    "a": 0
  }

    ].map(x=>({type:'SOAL SATUAN', q:x.q, options:x.o, answer:x.a}));

    
    
    S_SATUAN = shuffle(SOAL_SATUAN)

    /*  Validasi jumlah
    if(SINONIM.length!==90||ANTONIM.length!==90){
      console.warn('Jumlah soal tidak 90/90:', SINONIM.length, ANTONIM.length);
    }  */

    // /* Gabung & acak
    function shuffleOptions(q){  
        let opts = q.options.map((opt, i) => ({opt, i}));
        opts = shuffle(opts); // pake fungsi shuffle yang sudah kamu punya
        let newAnswer = opts.findIndex(o => o.i === q.answer);
        return {
            ...q,
            options: opts.map(o => o.opt),
            answer: newAnswer
  };
  
}
//*/
    let QUESTIONS = [...S_SATUAN].map((q,i)=>({id:i+1, ...shuffleOptions(q)}));
    // let QUESTIONS = [...SINONIM, ...ANTONIM].map((q,i)=>({id:i+1, ...q }));
    // State
    let state = {
      user:null,
      timeLeft: 20*60, // 45 menit
      currentIndex: 0,
      answers: Array(180).fill(null), // simpan index jawaban (0..3) atau null
    };

    /** RENDERING **/
    function formatTime(s){
      const m = Math.floor(s/60).toString().padStart(2,'0');
      const r = (s%60).toString().padStart(2,'0');
      return `${m}:${r}`;
    }

    function renderTimer(){
      el('#timer').textContent = formatTime(state.timeLeft);
      if(state.timeLeft <= 60){ el('#timer').style.background = '#331a1a'; el('#timer').style.borderColor = '#7f1d1d'; }
      if(state.timeLeft <= 0){
        submitQuiz();
      }
    }

    let tick = null;
    function startTimer(){
      if(tick) clearInterval(tick);
      tick = setInterval(()=>{ state.timeLeft--; renderTimer(); if(state.timeLeft<=0) clearInterval(tick); }, 1000);
    }

    function mountNav(){
      const nav = el('#nav');
      nav.innerHTML = '';
      QUESTIONS.forEach((q,idx)=>{
        const b = document.createElement('button');
        b.textContent = idx+1;
        b.addEventListener('click', ()=>{ goTo(idx); });
        nav.appendChild(b);
      });
      updateNavActive();
    }

    function updateNavActive(){
      const buttons = els('#nav button');
      buttons.forEach((b,idx)=>{
        b.classList.toggle('active', idx===state.currentIndex);
        b.classList.toggle('done', state.answers[idx]!==null);
      });
      el('#infoSoal').textContent = `Soal ${state.currentIndex+1} / ${QUESTIONS.length}`;
      el('#infoKategori').textContent = `Kategori: ${QUESTIONS[state.currentIndex].type.toUpperCase()}`;
    }

    function renderQuestion(){
      const q = QUESTIONS[state.currentIndex];
      const container = el('#questionArea');
      container.innerHTML = '';
      const title = document.createElement('div');
      title.className = 'q-title';
      title.textContent = q.q;
      container.appendChild(title);

      const list = document.createElement('div');
      list.className = 'choices';
      q.options.forEach((opt, i)=>{
        const row = document.createElement('label');
        row.className = 'choice';
        const input = document.createElement('input');
        input.type = 'radio'; input.name = 'choice'; input.value = i;
        input.checked = state.answers[state.currentIndex]===i;
        input.addEventListener('change', ()=>{
          state.answers[state.currentIndex]=i;
          updateNavActive();
        });
        const span = document.createElement('div');
        span.textContent = opt;
        row.appendChild(input); row.appendChild(span); list.appendChild(row);
      });
      container.appendChild(list);
    }

    function goTo(idx){
      state.currentIndex = Math.max(0, Math.min(QUESTIONS.length-1, idx));
      updateNavActive();
      renderQuestion();
    }

    function next(){ if(state.currentIndex < QUESTIONS.length-1){ goTo(state.currentIndex+1); } }
    function prev(){ if(state.currentIndex > 0){ goTo(state.currentIndex-1); } }

    function resetAnswers(){
      if(!confirm('Yakin reset semua jawaban?')) return;
      state.answers = Array(QUESTIONS.length).fill(null);
      updateNavActive();
      renderQuestion();
    }

    function submitQuiz(){
      // hitung skor per kategori
      let sSin=0, sAnt=0, sHip=0;
      QUESTIONS.forEach((q,idx)=>{
        const pick = state.answers[idx];
        const correct = q.answer;
        if(pick===correct){
          if(q.type==='SOAL SATUAN') sSin++;
        }
      });
      const total = sSin + sAnt + sHip;

      // tampilkan

      el('#scoreTotal').textContent = `${total} / 29`;
      el('#resultUser').textContent = `Peserta: ${state.user?.nama || '-'} (waktu habis/kumpul)`;

      // stop timer, ganti section
      if(tick) clearInterval(tick);
      showSection('result');
      window.scrollTo({top:0, behavior:'smooth'});
    }

    function showSection(which){
      el('#section-form').classList.remove('active');
      el('#section-quiz').classList.remove('active');
      el('#section-result').classList.remove('active');
      if(which==='form') el('#section-form').classList.add('active');
      if(which==='quiz') el('#section-quiz').classList.add('active');
      if(which==='result') el('#section-result').classList.add('active');
    }

    // EVENTS
    el('#btnMulai').addEventListener('click', ()=>{
      const nama = el('#nama').value.trim();
      const pass = el('#pass').value.trim();
      if(!nama || !pass){ alert('Nama dan password wajib diisi.'); return; }
      if(pass!=="KEDINASANEP"){
        alert("password salah! tanya password ke sir hardi. klo sir hardi dak tau tanya ke sir meca");
        return;
      }
      state.user = {nama, pass};
      el('#infoUser').textContent = `Peserta: ${nama}`;
      showSection('quiz');
      startTimer();
      mountNav();
      goTo(0);
      renderTimer();
    });

    el('#prevBtn').addEventListener('click', prev);
    el('#nextBtn').addEventListener('click', next);
    el('#btnReset').addEventListener('click', resetAnswers);
    el('#btnSubmit').addEventListener('click', ()=>{
      if(confirm('Kumpulkan jawaban sekarang?')) submitQuiz();
    });

    // Keyboard nav: panah kiri/kanan, angka 1-4 untuk memilih A-D
    window.addEventListener('keydown', (e)=>{
      if(!el('#section-quiz').classList.contains('active')) return;
      if(e.key==='ArrowRight') next();
      if(e.key==='ArrowLeft') prev();
      if(['1','2','3','4'].includes(e.key)){
        const idx = parseInt(e.key)-1;
        state.answers[state.currentIndex]=idx;
        updateNavActive();
        renderQuestion();
      }
    });

    // Ulang dari hasil
    el('#btnUlang').addEventListener('click', ()=>{
      state = { user: state.user, timeLeft: 245*60, currentIndex: 0, answers: Array(180).fill(null)};
      QUESTIONS = shuffle(QUESTIONS); // acak ulang urutan
      showSection('quiz');
      startTimer();
      mountNav();
      goTo(0);
      renderTimer();
    });

  </script>
</body>
</html>
